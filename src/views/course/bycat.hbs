{{#section "styles" append=true}}
<link rel="stylesheet" href="/bycat.css">
{{/section}}

<div class="category-page">
  <h2 class="category-title">{{sub_cat.SubCatName}} in {{category.CatName}}</h2>

  <div class="category-section">
    <div class="course-list">
      {{#each courses}}
      <div class="course-card">
        <a href="/course/detail?id={{CourseID}}">
          <img src="https://picsum.photos/300/200?random={{CourseID}}" alt="{{CourseName}}">
          <div class="course-info">
            <h3>{{CourseName}}</h3>
            <p class="instructor">{{InstructorName}}</p>
            <div class="course-rating">
              <i class="fas fa-star"></i><i class="fas fa-star"></i>
              <i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
              <i class="far fa-star"></i>
              <span>{{Rating}}</span>
              <div class="reviews">{{Total_Review}}</div>
            </div>
            <div class="course-price">
              <span class="current">{{CurrentPrice}}</span>
              <span class="old">{{OriginalPrice}}</span>
            </div>
          </div>
        </a>
      </div>
      {{/each}}

      {{#unless courses.length}}
        <p>No courses found in this subcategory.</p>
      {{/unless}}
    </div>

    <div class="pagination">
      {{#if (gt currentPage 1)}}
        <a href="/course/bycat?catid={{category.CatID}}&subcatid={{subcatId}}&page={{minus currentPage 1}}">
          Previous
        </a>
      {{/if}}

      {{#each (range 1 totalPages)}}
        <a href="/course/bycat?catid={{../category.CatID}}&subcatid={{../subcatId}}&page={{this}}"
           class="{{#if (eq this ../currentPage)}}active{{/if}}">
          {{this}}
        </a>
      {{/each}}

      {{#if (lt currentPage totalPages)}}
        <a href="/course/bycat?catid={{category.CatID}}&subcatid={{subcatId}}&page={{plus currentPage 1}}">
          Next
        </a>
      {{/if}}
    </div>
  </div>
</div>
