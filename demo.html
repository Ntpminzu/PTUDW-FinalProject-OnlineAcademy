<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Slytherin Academy - Online Learning Platform</title>
    <script src="/_sdk/data_sdk.js"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet" />
    <style>
      body {
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(
          135deg,
          #0d4a2b 0%,
          #1a5c3a 50%,
          #2d7a4f 100%
        );
        color: #ffffff;
        min-height: 100%;
      }

      /* Slytherin Theme Colors */
      :root {
        --slytherin-green: #0d4a2b;
        --slytherin-silver: #c0c0c0;
        --slytherin-dark: #1a1a1a;
        --slytherin-light: #2d7a4f;
        --accent-gold: #d4af37;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header & Navigation */
      .header {
        background: linear-gradient(
          90deg,
          var(--slytherin-dark) 0%,
          var(--slytherin-green) 100%
        );
        padding: 15px 0;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 2rem;
        font-weight: bold;
        color: var(--accent-gold);
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .nav-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 30px;
      }

      .nav-item {
        position: relative;
      }

      .nav-link {
        color: var(--slytherin-silver);
        text-decoration: none;
        padding: 10px 15px;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .nav-link:hover {
        background: var(--slytherin-light);
        color: white;
        transform: translateY(-2px);
      }

      .dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        background: var(--slytherin-dark);
        min-width: 200px;
        border-radius: 8px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
      }

      .nav-item:hover .dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .dropdown-item {
        display: block;
        padding: 12px 20px;
        color: var(--slytherin-silver);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .dropdown-item:hover {
        background: var(--slytherin-light);
        color: white;
      }

      .auth-buttons {
        display: flex;
        gap: 15px;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
        text-align: center;
      }

      .btn-primary {
        background: var(--accent-gold);
        color: var(--slytherin-dark);
      }

      .btn-primary:hover {
        background: #b8941f;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
      }

      .btn-secondary {
        background: transparent;
        color: var(--slytherin-silver);
        border: 2px solid var(--slytherin-silver);
      }

      .btn-secondary:hover {
        background: var(--slytherin-silver);
        color: var(--slytherin-dark);
      }

      .btn-success {
        background: #27ae60;
        color: white;
      }

      .btn-success:hover {
        background: #219a52;
      }

      .btn-danger {
        background: #e74c3c;
        color: white;
      }

      .btn-danger:hover {
        background: #c0392b;
      }

      /* Hero Section */
      .hero {
        background: linear-gradient(
            135deg,
            rgba(13, 74, 43, 0.9),
            rgba(26, 92, 58, 0.9)
          ),
          url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600"><defs><pattern id="snake" patternUnits="userSpaceOnUse" width="100" height="100"><path d="M20,20 Q50,10 80,20 Q50,30 20,20" stroke="%23d4af37" stroke-width="2" fill="none" opacity="0.1"/></pattern></defs><rect width="1000" height="600" fill="url(%23snake)"/></svg>');
        padding: 100px 0;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at 30% 70%,
          rgba(212, 175, 55, 0.1) 0%,
          transparent 50%
        );
      }

      .hero-content {
        position: relative;
        z-index: 2;
      }

      .hero h1 {
        font-size: 4rem;
        margin-bottom: 20px;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
        color: var(--accent-gold);
      }

      .hero p {
        font-size: 1.3rem;
        margin-bottom: 40px;
        color: var(--slytherin-silver);
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .search-container {
        max-width: 600px;
        margin: 0 auto;
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: 15px 60px 15px 20px;
        border: none;
        border-radius: 50px;
        font-size: 1.1rem;
        background: rgba(255, 255, 255, 0.95);
        color: var(--slytherin-dark);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .search-btn {
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--accent-gold);
        border: none;
        padding: 10px 20px;
        border-radius: 50px;
        cursor: pointer;
        color: var(--slytherin-dark);
        font-weight: bold;
      }

      /* Course Sections */
      .section {
        padding: 80px 0;
        position: relative;
      }

      .section-title {
        font-size: 2.5rem;
        text-align: center;
        margin-bottom: 50px;
        color: var(--accent-gold);
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      /* Slideshow for Featured Courses */
      .slideshow-container {
        position: relative;
        max-width: 100%;
        margin: auto;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .slide {
        display: none;
        background: linear-gradient(
          135deg,
          var(--slytherin-dark),
          var(--slytherin-green)
        );
        padding: 60px;
        text-align: center;
        min-height: 400px;
        position: relative;
      }

      .slide.active {
        display: block;
      }

      .slide h3 {
        font-size: 2.5rem;
        color: var(--accent-gold);
        margin-bottom: 20px;
      }

      .slide p {
        font-size: 1.2rem;
        color: var(--slytherin-silver);
        margin-bottom: 30px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .slide-meta {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .meta-badge {
        background: rgba(212, 175, 55, 0.2);
        padding: 8px 16px;
        border-radius: 20px;
        color: var(--accent-gold);
        font-weight: bold;
      }

      .prev,
      .next {
        cursor: pointer;
        position: absolute;
        top: 50%;
        width: auto;
        margin-top: -22px;
        padding: 16px;
        color: var(--accent-gold);
        font-weight: bold;
        font-size: 18px;
        transition: 0.3s ease;
        border-radius: 0 3px 3px 0;
        background: rgba(0, 0, 0, 0.5);
      }

      .next {
        right: 0;
        border-radius: 3px 0 0 3px;
      }

      .prev:hover,
      .next:hover {
        background: rgba(212, 175, 55, 0.8);
        color: var(--slytherin-dark);
      }

      .dots-container {
        text-align: center;
        margin-top: 20px;
      }

      .dot {
        cursor: pointer;
        height: 15px;
        width: 15px;
        margin: 0 5px;
        background-color: rgba(192, 192, 192, 0.5);
        border-radius: 50%;
        display: inline-block;
        transition: background-color 0.3s ease;
      }

      .dot.active,
      .dot:hover {
        background-color: var(--accent-gold);
      }

      /* Course Grid */
      .course-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-top: 50px;
      }

      .course-card {
        background: linear-gradient(
          135deg,
          var(--slytherin-dark),
          var(--slytherin-green)
        );
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        position: relative;
      }

      .course-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      }

      .course-image {
        height: 200px;
        background: linear-gradient(
          45deg,
          var(--slytherin-light),
          var(--accent-gold)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        color: white;
        position: relative;
      }

      .course-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: var(--accent-gold);
        color: var(--slytherin-dark);
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .course-content {
        padding: 25px;
      }

      .course-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: var(--accent-gold);
        margin-bottom: 10px;
      }

      .course-category {
        color: var(--slytherin-silver);
        font-size: 0.9rem;
        margin-bottom: 15px;
      }

      .course-instructor {
        color: var(--slytherin-silver);
        margin-bottom: 15px;
      }

      .course-rating {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
      }

      .stars {
        color: var(--accent-gold);
      }

      .course-price {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: bold;
      }

      .price-current {
        color: var(--accent-gold);
        font-size: 1.2rem;
      }

      .price-original {
        color: var(--slytherin-silver);
        text-decoration: line-through;
        font-size: 0.9rem;
      }

      /* Categories Section */
      .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin-top: 50px;
      }

      .category-card {
        background: linear-gradient(
          135deg,
          var(--slytherin-dark),
          var(--slytherin-light)
        );
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .category-card:hover {
        border-color: var(--accent-gold);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2);
      }

      .category-icon {
        font-size: 3rem;
        margin-bottom: 20px;
        color: var(--accent-gold);
      }

      .category-name {
        font-size: 1.3rem;
        font-weight: bold;
        color: white;
        margin-bottom: 10px;
      }

      .category-count {
        color: var(--slytherin-silver);
        font-size: 0.9rem;
      }

      /* User Interface */
      .user-section {
        background: var(--slytherin-dark);
        padding: 60px 0;
        margin-top: 50px;
      }

      .user-tabs {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 40px;
        flex-wrap: wrap;
      }

      .tab-btn {
        padding: 12px 25px;
        background: transparent;
        color: var(--slytherin-silver);
        border: 2px solid var(--slytherin-silver);
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .tab-btn.active {
        background: var(--accent-gold);
        color: var(--slytherin-dark);
        border-color: var(--accent-gold);
      }

      .tab-content {
        display: none;
        max-width: 1000px;
        margin: 0 auto;
        background: var(--slytherin-green);
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .tab-content.active {
        display: block;
      }

      .form-group {
        margin-bottom: 25px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        color: var(--accent-gold);
        font-weight: 600;
      }

      .form-input,
      .form-select,
      .form-textarea {
        width: 100%;
        padding: 12px 15px;
        border: none;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.95);
        color: var(--slytherin-dark);
        font-size: 1rem;
        box-sizing: border-box;
      }

      .form-textarea {
        min-height: 120px;
        resize: vertical;
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
      }

      /* Course Form Styles */
      .course-form {
        background: var(--slytherin-dark);
        padding: 40px;
        border-radius: 15px;
        margin-top: 30px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 25px;
      }

      .form-row.full {
        grid-template-columns: 1fr;
      }

      /* WYSIWYG Editor Styles */
      .editor-container {
        background: white;
        border-radius: 8px;
        overflow: hidden;
      }

      .ql-toolbar {
        border-top: none !important;
        border-left: none !important;
        border-right: none !important;
      }

      .ql-container {
        border-bottom: none !important;
        border-left: none !important;
        border-right: none !important;
        min-height: 200px;
      }

      /* Chapter Management */
      .chapter-list {
        background: var(--slytherin-green);
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
      }

      .chapter-item {
        background: var(--slytherin-dark);
        padding: 15px 20px;
        border-radius: 8px;
        margin-bottom: 15px;
        display: flex;
        justify-content: between;
        align-items: center;
        gap: 15px;
      }

      .chapter-info {
        flex: 1;
      }

      .chapter-title {
        color: var(--accent-gold);
        font-weight: bold;
        margin-bottom: 5px;
      }

      .chapter-status {
        color: var(--slytherin-silver);
        font-size: 0.9rem;
      }

      .chapter-actions {
        display: flex;
        gap: 10px;
      }

      /* Video Upload */
      .video-upload {
        border: 2px dashed var(--accent-gold);
        border-radius: 10px;
        padding: 30px;
        text-align: center;
        background: rgba(212, 175, 55, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .video-upload:hover {
        background: rgba(212, 175, 55, 0.2);
      }

      .video-upload.dragover {
        background: rgba(212, 175, 55, 0.3);
        border-color: #b8941f;
      }

      /* Admin Panel */
      .admin-panel {
        background: var(--slytherin-dark);
        padding: 40px;
        border-radius: 15px;
        margin-top: 40px;
      }

      .admin-tabs {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .admin-tab {
        padding: 10px 20px;
        background: var(--slytherin-green);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .admin-tab.active {
        background: var(--accent-gold);
        color: var(--slytherin-dark);
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        background: var(--slytherin-green);
        border-radius: 10px;
        overflow: hidden;
      }

      .data-table th,
      .data-table td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .data-table th {
        background: var(--slytherin-dark);
        color: var(--accent-gold);
        font-weight: bold;
      }

      .data-table td {
        color: white;
      }

      .action-btn {
        padding: 5px 12px;
        margin: 0 3px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .btn-edit {
        background: #3498db;
        color: white;
      }

      .btn-delete {
        background: #e74c3c;
        color: white;
      }

      .btn-view {
        background: var(--accent-gold);
        color: var(--slytherin-dark);
      }

      /* Status Badges */
      .status-badge {
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .status-draft {
        background: #f39c12;
        color: white;
      }

      .status-incomplete {
        background: #e67e22;
        color: white;
      }

      .status-completed {
        background: #27ae60;
        color: white;
      }

      .status-published {
        background: #2ecc71;
        color: white;
      }

      /* Loading States */
      .loading {
        text-align: center;
        padding: 40px;
        color: var(--slytherin-silver);
      }

      .spinner {
        border: 4px solid rgba(212, 175, 55, 0.3);
        border-radius: 50%;
        border-top: 4px solid var(--accent-gold);
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
      }

      .modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background: var(--slytherin-dark);
        padding: 30px;
        border-radius: 15px;
        max-width: 800px;
        width: 90%;
        max-height: 90%;
        overflow-y: auto;
        position: relative;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--slytherin-green);
      }

      .modal-title {
        color: var(--accent-gold);
        font-size: 1.5rem;
        font-weight: bold;
      }

      .close-btn {
        background: none;
        border: none;
        color: var(--slytherin-silver);
        font-size: 1.5rem;
        cursor: pointer;
        padding: 5px;
      }

      .close-btn:hover {
        color: var(--accent-gold);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .nav-menu {
          display: none;
        }

        .hero h1 {
          font-size: 2.5rem;
        }

        .course-grid {
          grid-template-columns: 1fr;
        }

        .slide {
          padding: 30px 20px;
        }

        .admin-tabs {
          flex-direction: column;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .tab-content {
          padding: 20px;
        }
      }

      /* Pagination */
      .pagination {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 40px;
      }

      .page-btn {
        padding: 10px 15px;
        background: var(--slytherin-green);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .page-btn:hover,
      .page-btn.active {
        background: var(--accent-gold);
        color: var(--slytherin-dark);
      }

      /* Toast Messages */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--accent-gold);
        color: var(--slytherin-dark);
        padding: 15px 25px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        transform: translateX(400px);
        transition: transform 0.3s ease;
      }

      .toast.show {
        transform: translateX(0);
      }

      .toast.error {
        background: #e74c3c;
        color: white;
      }

      .toast.success {
        background: #27ae60;
        color: white;
      }

      /* Progress Bar */
      .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: var(--accent-gold);
        transition: width 0.3s ease;
      }
    </style>
    <style>
      @view-transition {
        navigation: auto;
      }
    </style>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <nav class="nav-container">
          <div class="logo" id="academyName">üêç Slytherin Academy</div>
          <ul class="nav-menu">
            <li class="nav-item">
              <a href="#" class="nav-link" onclick="showSection('home')"
                >Trang ch·ªß</a
              >
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">Lƒ©nh v·ª±c</a>
              <div class="dropdown">
                <a
                  href="#"
                  class="dropdown-item"
                  onclick="showCoursesByCategory('IT', 'L·∫≠p tr√¨nh Web')"
                  >üåê L·∫≠p tr√¨nh Web</a
                >
                <a
                  href="#"
                  class="dropdown-item"
                  onclick="showCoursesByCategory('IT', 'L·∫≠p tr√¨nh thi·∫øt b·ªã di ƒë·ªông')"
                  >üì± L·∫≠p tr√¨nh Mobile</a
                >
                <a
                  href="#"
                  class="dropdown-item"
                  onclick="showCoursesByCategory('Design', 'UI/UX Design')"
                  >üé® UI/UX Design</a
                >
                <a
                  href="#"
                  class="dropdown-item"
                  onclick="showCoursesByCategory('Business', 'Marketing')"
                  >üìà Marketing</a
                >
              </div>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link" onclick="showSection('courses')"
                >Kh√≥a h·ªçc</a
              >
            </li>
            <li class="nav-item">
              <a
                href="#"
                class="nav-link"
                onclick="showSection('courseManagement')"
                >üìö Qu·∫£n l√Ω kh√≥a h·ªçc</a
              >
            </li>
            <li class="nav-item">
              <a
                href="#"
                class="nav-link"
                onclick="showSection('instructorManagement')"
                >üë®‚Äçüè´ Qu·∫£n l√Ω gi·∫£ng vi√™n</a
              >
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link" onclick="showSection('search')"
                >T√¨m ki·∫øm</a
              >
            </li>
          </ul>
          <div class="auth-buttons">
            <div id="guestButtons">
              <a
                href="#"
                class="btn btn-secondary"
                onclick="showSection('auth')"
                >ƒêƒÉng nh·∫≠p</a
              >
              <a href="#" class="btn btn-primary" onclick="showSection('auth')"
                >ƒêƒÉng k√Ω</a
              >
            </div>
            <div id="userButtons" style="display: none">
              <span id="welcomeUser" class="nav-link"></span>
              <a
                href="#"
                class="btn btn-secondary"
                onclick="showSection('profile')"
                >H·ªì s∆°</a
              >
              <a href="#" class="btn btn-primary" onclick="logout()"
                >ƒêƒÉng xu·∫•t</a
              >
            </div>
          </div>
        </nav>
      </div>
    </header>
    <!-- Main Content -->
    <main>
      <!-- Home Section -->
      <section id="homeSection" class="section">
        <!-- Hero -->
        <div class="hero">
          <div class="container">
            <div class="hero-content">
              <h1 id="welcomeMessage">Ch√†o m·ª´ng ƒë·∫øn v·ªõi Slytherin Academy</h1>
              <p>
                N∆°i kh∆°i ngu·ªìn tri th·ª©c v√† ph√°t tri·ªÉn k·ªπ nƒÉng v·ªõi nh·ªØng kh√≥a h·ªçc
                ch·∫•t l∆∞·ª£ng cao t·ª´ c√°c chuy√™n gia h√†ng ƒë·∫ßu
              </p>
              <div class="search-container">
                <input
                  type="text"
                  class="search-input"
                  id="heroSearch"
                  placeholder="T√¨m ki·∫øm kh√≥a h·ªçc..." />
                <button class="search-btn" onclick="performSearch()">üîç</button>
              </div>
            </div>
          </div>
        </div>
        <div class="container">
          <!-- Featured Courses Slideshow -->
          <div class="section">
            <h2 class="section-title" id="featuredTitle">
              üåü Kh√≥a h·ªçc n·ªïi b·∫≠t tu·∫ßn n√†y
            </h2>
            <div class="slideshow-container">
              <div class="slide active">
                <h3>üêç Advanced Python Programming</h3>
                <p>
                  N√¢ng cao k·ªπ nƒÉng l·∫≠p tr√¨nh Python v·ªõi c√°c k·ªπ thu·∫≠t advanced v√†
                  best practices t·ª´ c√°c chuy√™n gia
                </p>
                <div class="slide-meta">
                  <span class="meta-badge">‚≠ê 4.9 (1,234 ƒë√°nh gi√°)</span>
                  <span class="meta-badge">üë• 5,678 h·ªçc vi√™n</span>
                  <span class="meta-badge">üí∞ 1,299,000 VNƒê</span>
                </div>
                <a
                  href="#"
                  class="btn btn-primary"
                  onclick="showCourseDetail('python-advanced')"
                  >Xem chi ti·∫øt</a
                >
              </div>
              <div class="slide">
                <h3>‚ö° React.js Mastery</h3>
                <p>
                  Tr·ªü th√†nh chuy√™n gia React.js v·ªõi kh√≥a h·ªçc to√†n di·ªán t·ª´ c∆° b·∫£n
                  ƒë·∫øn n√¢ng cao
                </p>
                <div class="slide-meta">
                  <span class="meta-badge">‚≠ê 4.8 (987 ƒë√°nh gi√°)</span>
                  <span class="meta-badge">üë• 3,456 h·ªçc vi√™n</span>
                  <span class="meta-badge">üí∞ 1,599,000 VNƒê</span>
                </div>
                <a
                  href="#"
                  class="btn btn-primary"
                  onclick="showCourseDetail('react-mastery')"
                  >Xem chi ti·∫øt</a
                >
              </div>
              <div class="slide">
                <h3>üé® UI/UX Design Complete</h3>
                <p>
                  Kh√≥a h·ªçc thi·∫øt k·∫ø UI/UX ho√†n ch·ªânh v·ªõi c√°c d·ª± √°n th·ª±c t·∫ø v√†
                  portfolio chuy√™n nghi·ªáp
                </p>
                <div class="slide-meta">
                  <span class="meta-badge">‚≠ê 4.7 (756 ƒë√°nh gi√°)</span>
                  <span class="meta-badge">üë• 2,345 h·ªçc vi√™n</span>
                  <span class="meta-badge">üí∞ 1,799,000 VNƒê</span>
                </div>
                <a
                  href="#"
                  class="btn btn-primary"
                  onclick="showCourseDetail('uiux-complete')"
                  >Xem chi ti·∫øt</a
                >
              </div>
              <a class="prev" onclick="changeSlide(-1)">‚ùÆ</a>
              <a class="next" onclick="changeSlide(1)">‚ùØ</a>
            </div>
            <div class="dots-container">
              <span class="dot active" onclick="currentSlide(1)"></span>
              <span class="dot" onclick="currentSlide(2)"></span>
              <span class="dot" onclick="currentSlide(3)"></span>
            </div>
          </div>
          <!-- Most Viewed Courses -->
          <div class="section">
            <h2 class="section-title">üî• Kh√≥a h·ªçc ƒë∆∞·ª£c xem nhi·ªÅu nh·∫•t</h2>
            <div class="course-grid" id="mostViewedCourses">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i kh√≥a h·ªçc...</p>
              </div>
            </div>
          </div>
          <!-- Newest Courses -->
          <div class="section">
            <h2 class="section-title">üÜï Kh√≥a h·ªçc m·ªõi nh·∫•t</h2>
            <div class="course-grid" id="newestCourses">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i kh√≥a h·ªçc...</p>
              </div>
            </div>
          </div>
          <!-- Popular Categories -->
          <div class="section">
            <h2 class="section-title">üìö Lƒ©nh v·ª±c ph·ªï bi·∫øn</h2>
            <div class="categories-grid">
              <div
                class="category-card"
                onclick="showCoursesByCategory('IT', 'L·∫≠p tr√¨nh Web')">
                <div class="category-icon">üåê</div>
                <div class="category-name">L·∫≠p tr√¨nh Web</div>
                <div class="category-count">245 kh√≥a h·ªçc</div>
              </div>
              <div
                class="category-card"
                onclick="showCoursesByCategory('IT', 'L·∫≠p tr√¨nh thi·∫øt b·ªã di ƒë·ªông')">
                <div class="category-icon">üì±</div>
                <div class="category-name">L·∫≠p tr√¨nh Mobile</div>
                <div class="category-count">156 kh√≥a h·ªçc</div>
              </div>
              <div
                class="category-card"
                onclick="showCoursesByCategory('Design', 'UI/UX Design')">
                <div class="category-icon">üé®</div>
                <div class="category-name">UI/UX Design</div>
                <div class="category-count">89 kh√≥a h·ªçc</div>
              </div>
              <div
                class="category-card"
                onclick="showCoursesByCategory('Business', 'Marketing')">
                <div class="category-icon">üìà</div>
                <div class="category-name">Marketing</div>
                <div class="category-count">134 kh√≥a h·ªçc</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Courses Section -->
      <section id="coursesSection" class="section" style="display: none">
        <div class="container">
          <h2 class="section-title">üìö Danh s√°ch kh√≥a h·ªçc</h2>
          <div
            class="course-filters"
            style="margin-bottom: 30px; text-align: center">
            <select
              id="categoryFilter"
              class="form-input"
              style="width: auto; margin-right: 15px">
              <option value="">T·∫•t c·∫£ lƒ©nh v·ª±c</option>
              <option value="IT">C√¥ng ngh·ªá th√¥ng tin</option>
              <option value="Design">Thi·∫øt k·∫ø</option>
              <option value="Business">Kinh doanh</option>
              <option value="Marketing">Marketing</option>
            </select>
            <select id="sortFilter" class="form-input" style="width: auto">
              <option value="rating">ƒê√°nh gi√° cao nh·∫•t</option>
              <option value="price_asc">Gi√° tƒÉng d·∫ßn</option>
              <option value="newest">M·ªõi nh·∫•t</option>
              <option value="popular">Ph·ªï bi·∫øn nh·∫•t</option>
            </select>
          </div>
          <div class="course-grid" id="allCourses">
            <div class="loading">
              <div class="spinner"></div>
              <p>ƒêang t·∫£i kh√≥a h·ªçc...</p>
            </div>
          </div>
          <div class="pagination" id="coursePagination"></div>
        </div>
      </section>
      <!-- Search Section -->
      <section id="searchSection" class="section" style="display: none">
        <div class="container">
          <h2 class="section-title">üîç T√¨m ki·∫øm kh√≥a h·ªçc</h2>
          <div
            class="search-container"
            style="max-width: 800px; margin: 0 auto 40px">
            <input
              type="text"
              class="search-input"
              id="searchInput"
              placeholder="Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm..." />
            <button class="search-btn" onclick="performAdvancedSearch()">
              T√¨m ki·∫øm
            </button>
          </div>
          <div
            class="search-filters"
            style="
              display: flex;
              justify-content: center;
              gap: 20px;
              margin-bottom: 40px;
              flex-wrap: wrap;
            ">
            <select id="searchCategory" class="form-input" style="width: auto">
              <option value="">T·∫•t c·∫£ lƒ©nh v·ª±c</option>
              <option value="IT">C√¥ng ngh·ªá th√¥ng tin</option>
              <option value="Design">Thi·∫øt k·∫ø</option>
              <option value="Business">Kinh doanh</option>
            </select>
            <select id="searchSort" class="form-input" style="width: auto">
              <option value="relevance">Li√™n quan nh·∫•t</option>
              <option value="rating">ƒê√°nh gi√° cao nh·∫•t</option>
              <option value="price_asc">Gi√° tƒÉng d·∫ßn</option>
              <option value="newest">M·ªõi nh·∫•t</option>
            </select>
          </div>
          <div class="course-grid" id="searchResults">
            <div
              style="
                text-align: center;
                color: var(--slytherin-silver);
                padding: 60px;
              ">
              <h3>üîç Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm kh√≥a h·ªçc</h3>
              <p>
                S·ª≠ d·ª•ng t·ª´ kh√≥a li√™n quan ƒë·∫øn t√™n kh√≥a h·ªçc ho·∫∑c lƒ©nh v·ª±c b·∫°n
                quan t√¢m
              </p>
            </div>
          </div>
          <div class="pagination" id="searchPagination"></div>
        </div>
      </section>
      <!-- Course Detail Section -->
      <section id="courseDetailSection" class="section" style="display: none">
        <div class="container">
          <div id="courseDetailContent">
            <!-- Course detail will be loaded here -->
          </div>
        </div>
      </section>
      <!-- Auth Section -->
      <section
        id="authSection"
        class="section user-section"
        style="display: none">
        <div class="container">
          <h2 class="section-title">üîê ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h2>
          <div class="user-tabs">
            <button class="tab-btn active" onclick="switchTab('login')">
              ƒêƒÉng nh·∫≠p
            </button>
            <button class="tab-btn" onclick="switchTab('register')">
              ƒêƒÉng k√Ω
            </button>
          </div>
          <div id="loginTab" class="tab-content active">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              ƒêƒÉng nh·∫≠p t√†i kho·∫£n
            </h3>
            <form onsubmit="handleLogin(event)">
              <div class="form-group">
                <label class="form-label" for="loginEmail">Email</label>
                <input
                  type="email"
                  class="form-input"
                  id="loginEmail"
                  required />
              </div>
              <div class="form-group">
                <label class="form-label" for="loginPassword">M·∫≠t kh·∫©u</label>
                <input
                  type="password"
                  class="form-input"
                  id="loginPassword"
                  required />
              </div>
              <button type="submit" class="btn btn-primary" style="width: 100%">
                ƒêƒÉng nh·∫≠p
              </button>
            </form>
          </div>
          <div id="registerTab" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              ƒêƒÉng k√Ω t√†i kho·∫£n
            </h3>
            <form onsubmit="handleRegister(event)">
              <div class="form-group">
                <label class="form-label" for="registerName">H·ªç t√™n</label>
                <input
                  type="text"
                  class="form-input"
                  id="registerName"
                  required />
              </div>
              <div class="form-group">
                <label class="form-label" for="registerEmail">Email</label>
                <input
                  type="email"
                  class="form-input"
                  id="registerEmail"
                  required />
              </div>
              <div class="form-group">
                <label class="form-label" for="registerPassword"
                  >M·∫≠t kh·∫©u</label
                >
                <input
                  type="password"
                  class="form-input"
                  id="registerPassword"
                  required />
              </div>
              <div class="form-group">
                <label class="form-label" for="registerUserType"
                  >Lo·∫°i t√†i kho·∫£n</label
                >
                <select class="form-input" id="registerUserType" required>
                  <option value="student">H·ªçc vi√™n</option>
                  <option value="instructor">Gi·∫£ng vi√™n</option>
                </select>
              </div>
              <button type="submit" class="btn btn-primary" style="width: 100%">
                ƒêƒÉng k√Ω
              </button>
            </form>
          </div>
        </div>
      </section>
      <!-- Course Management Section -->
      <section
        id="courseManagementSection"
        class="section user-section"
        style="display: none">
        <div class="container">
          <h2 class="section-title">üìö Qu·∫£n l√Ω kh√≥a h·ªçc</h2>
          <div class="user-tabs">
            <button class="tab-btn active" onclick="switchCourseTab('list')">
              Danh s√°ch kh√≥a h·ªçc
            </button>
            <button class="tab-btn" onclick="switchCourseTab('add')">
              Th√™m kh√≥a h·ªçc
            </button>
            <button class="tab-btn" onclick="switchCourseTab('categories')">
              Qu·∫£n l√Ω danh m·ª•c
            </button>
          </div>
          <div id="courseList" class="tab-content active">
            <div
              style="
                display: flex;
                justify-content: between;
                align-items: center;
                margin-bottom: 30px;
              ">
              <h3 style="color: var(--accent-gold)">üìã T·∫•t c·∫£ kh√≥a h·ªçc</h3>
              <button class="btn btn-primary" onclick="showAddCourseForm()">
                ‚ûï Th√™m kh√≥a h·ªçc m·ªõi
              </button>
            </div>
            <div class="course-filters" style="margin-bottom: 30px">
              <select
                id="adminCategoryFilter"
                class="form-input"
                style="width: auto; margin-right: 15px">
                <option value="">T·∫•t c·∫£ lƒ©nh v·ª±c</option>
                <option value="IT">C√¥ng ngh·ªá th√¥ng tin</option>
                <option value="Design">Thi·∫øt k·∫ø</option>
                <option value="Business">Kinh doanh</option>
                <option value="Marketing">Marketing</option>
              </select>
              <select
                id="adminStatusFilter"
                class="form-input"
                style="width: auto; margin-right: 15px">
                <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                <option value="completed">Ho√†n th√†nh</option>
                <option value="incomplete">Ch∆∞a ho√†n th√†nh</option>
                <option value="draft">B·∫£n nh√°p</option>
              </select>
              <input
                type="text"
                id="courseSearchInput"
                class="form-input"
                placeholder="T√¨m ki·∫øm kh√≥a h·ªçc..."
                style="width: 300px" />
            </div>
            <div id="adminCoursesList">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i danh s√°ch kh√≥a h·ªçc...</p>
              </div>
            </div>
          </div>
          <div id="courseAdd" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              ‚ûï Th√™m kh√≥a h·ªçc m·ªõi
            </h3>
            <div class="course-form">
              <form id="quickCourseForm" onsubmit="quickAddCourse(event)">
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="quickCourseTitle"
                      >T√™n kh√≥a h·ªçc *</label
                    >
                    <input
                      type="text"
                      class="form-input"
                      id="quickCourseTitle"
                      required />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="quickCourseImage"
                      >Icon kh√≥a h·ªçc</label
                    >
                    <input
                      type="text"
                      class="form-input"
                      id="quickCourseImage"
                      placeholder="üìö"
                      maxlength="2" />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="quickCourseCategory"
                      >Lƒ©nh v·ª±c *</label
                    >
                    <select
                      class="form-select"
                      id="quickCourseCategory"
                      required
                      onchange="updateQuickSubcategories()">
                      <option value="">Ch·ªçn lƒ©nh v·ª±c</option>
                      <option value="IT">C√¥ng ngh·ªá th√¥ng tin</option>
                      <option value="Design">Thi·∫øt k·∫ø</option>
                      <option value="Business">Kinh doanh</option>
                      <option value="Marketing">Marketing</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="quickCourseSubcategory"
                      >Chuy√™n ng√†nh *</label
                    >
                    <select
                      class="form-select"
                      id="quickCourseSubcategory"
                      required>
                      <option value="">Ch·ªçn chuy√™n ng√†nh</option>
                    </select>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="quickCoursePrice"
                      >Gi√° g·ªëc (VNƒê) *</label
                    >
                    <input
                      type="number"
                      class="form-input"
                      id="quickCoursePrice"
                      min="0"
                      required />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="quickCourseInstructor"
                      >Gi·∫£ng vi√™n *</label
                    >
                    <select
                      class="form-select"
                      id="quickCourseInstructor"
                      required>
                      <option value="">Ch·ªçn gi·∫£ng vi√™n</option>
                    </select>
                  </div>
                </div>
                <div class="form-row full">
                  <div class="form-group">
                    <label class="form-label" for="quickCourseDescription"
                      >M√¥ t·∫£ ng·∫Øn *</label
                    >
                    <textarea
                      class="form-textarea"
                      id="quickCourseDescription"
                      rows="3"
                      required
                      placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ kh√≥a h·ªçc..."></textarea>
                  </div>
                </div>
                <div style="text-align: center; margin-top: 30px">
                  <button
                    type="submit"
                    class="btn btn-primary"
                    style="margin-right: 15px">
                    üíæ L∆∞u kh√≥a h·ªçc
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    onclick="document.getElementById('quickCourseForm').reset()">
                    üîÑ L√†m m·ªõi
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div id="courseCategories" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              üè∑Ô∏è Qu·∫£n l√Ω danh m·ª•c
            </h3>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
              ">
              <div
                class="category-card"
                style="background: var(--slytherin-dark); padding: 25px">
                <h4 style="color: var(--accent-gold); margin-bottom: 20px">
                  üåê C√¥ng ngh·ªá th√¥ng tin
                </h4>
                <div style="color: var(--slytherin-silver); line-height: 1.8">
                  <div>
                    ‚Ä¢ L·∫≠p tr√¨nh Web (${allCourses.filter(c =&gt; c.subcategory
                    === 'L·∫≠p tr√¨nh Web').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ L·∫≠p tr√¨nh thi·∫øt b·ªã di ƒë·ªông (${allCourses.filter(c =&gt;
                    c.subcategory === 'L·∫≠p tr√¨nh thi·∫øt b·ªã di ƒë·ªông').length} kh√≥a
                    h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Data Science (${allCourses.filter(c =&gt; c.subcategory
                    === 'Data Science').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ DevOps (${allCourses.filter(c =&gt; c.subcategory ===
                    'DevOps').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Cybersecurity (${allCourses.filter(c =&gt; c.subcategory
                    === 'Cybersecurity').length} kh√≥a h·ªçc)
                  </div>
                </div>
              </div>
              <div
                class="category-card"
                style="background: var(--slytherin-dark); padding: 25px">
                <h4 style="color: var(--accent-gold); margin-bottom: 20px">
                  üé® Thi·∫øt k·∫ø
                </h4>
                <div style="color: var(--slytherin-silver); line-height: 1.8">
                  <div>
                    ‚Ä¢ UI/UX Design (${allCourses.filter(c =&gt; c.subcategory
                    === 'UI/UX Design').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Graphic Design (${allCourses.filter(c =&gt; c.subcategory
                    === 'Graphic Design').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Web Design (${allCourses.filter(c =&gt; c.subcategory ===
                    'Web Design').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Motion Graphics (${allCourses.filter(c =&gt; c.subcategory
                    === 'Motion Graphics').length} kh√≥a h·ªçc)
                  </div>
                </div>
              </div>
              <div
                class="category-card"
                style="background: var(--slytherin-dark); padding: 25px">
                <h4 style="color: var(--accent-gold); margin-bottom: 20px">
                  üíº Kinh doanh
                </h4>
                <div style="color: var(--slytherin-silver); line-height: 1.8">
                  <div>
                    ‚Ä¢ Qu·∫£n l√Ω d·ª± √°n (${allCourses.filter(c =&gt; c.subcategory
                    === 'Qu·∫£n l√Ω d·ª± √°n').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Kh·ªüi nghi·ªáp (${allCourses.filter(c =&gt; c.subcategory ===
                    'Kh·ªüi nghi·ªáp').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ T√†i ch√≠nh (${allCourses.filter(c =&gt; c.subcategory ===
                    'T√†i ch√≠nh').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Nh√¢n s·ª± (${allCourses.filter(c =&gt; c.subcategory ===
                    'Nh√¢n s·ª±').length} kh√≥a h·ªçc)
                  </div>
                </div>
              </div>
              <div
                class="category-card"
                style="background: var(--slytherin-dark); padding: 25px">
                <h4 style="color: var(--accent-gold); margin-bottom: 20px">
                  üìà Marketing
                </h4>
                <div style="color: var(--slytherin-silver); line-height: 1.8">
                  <div>
                    ‚Ä¢ Digital Marketing (${allCourses.filter(c =&gt;
                    c.subcategory === 'Digital Marketing').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Content Marketing (${allCourses.filter(c =&gt;
                    c.subcategory === 'Content Marketing').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ SEO/SEM (${allCourses.filter(c =&gt; c.subcategory ===
                    'SEO/SEM').length} kh√≥a h·ªçc)
                  </div>
                  <div>
                    ‚Ä¢ Social Media (${allCourses.filter(c =&gt; c.subcategory
                    === 'Social Media').length} kh√≥a h·ªçc)
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Instructor Management Section -->
      <section
        id="instructorManagementSection"
        class="section user-section"
        style="display: none">
        <div class="container">
          <h2 class="section-title">üë®‚Äçüè´ Qu·∫£n l√Ω gi·∫£ng vi√™n</h2>
          <div class="user-tabs">
            <button
              class="tab-btn active"
              onclick="switchInstructorTab('list')">
              Danh s√°ch gi·∫£ng vi√™n
            </button>
            <button class="tab-btn" onclick="switchInstructorTab('profile')">
              H·ªì s∆° c√° nh√¢n
            </button>
            <button class="tab-btn" onclick="switchInstructorTab('courses')">
              Kh√≥a h·ªçc c·ªßa t√¥i
            </button>
          </div>
          <div id="instructorList" class="tab-content active">
            <div
              style="
                display: flex;
                justify-content: between;
                align-items: center;
                margin-bottom: 30px;
              ">
              <h3 style="color: var(--accent-gold)">üë• T·∫•t c·∫£ gi·∫£ng vi√™n</h3>
              <div style="display: flex; gap: 15px">
                <input
                  type="text"
                  id="instructorSearchInput"
                  class="form-input"
                  placeholder="T√¨m ki·∫øm gi·∫£ng vi√™n..."
                  style="width: 300px" />
                <select
                  id="instructorExperienceFilter"
                  class="form-input"
                  style="width: auto">
                  <option value="">T·∫•t c·∫£ kinh nghi·ªám</option>
                  <option value="1-3">1-3 nƒÉm</option>
                  <option value="4-7">4-7 nƒÉm</option>
                  <option value="8+">8+ nƒÉm</option>
                </select>
              </div>
            </div>
            <div id="instructorsList">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i danh s√°ch gi·∫£ng vi√™n...</p>
              </div>
            </div>
          </div>
          <div id="instructorProfile" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              üë§ H·ªì s∆° gi·∫£ng vi√™n
            </h3>
            <div class="course-form">
              <form
                id="instructorProfileForm"
                onsubmit="updateInstructorProfile(event)">
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="instructorName"
                      >H·ªç t√™n *</label
                    >
                    <input
                      type="text"
                      class="form-input"
                      id="instructorName"
                      required />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="instructorEmail"
                      >Email *</label
                    >
                    <input
                      type="email"
                      class="form-input"
                      id="instructorEmail"
                      required />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="instructorExperience"
                      >Kinh nghi·ªám (nƒÉm) *</label
                    >
                    <input
                      type="number"
                      class="form-input"
                      id="instructorExperience"
                      min="0"
                      required />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="instructorAvatar"
                      >Avatar (emoji) *</label
                    >
                    <input
                      type="text"
                      class="form-input"
                      id="instructorAvatar"
                      maxlength="2"
                      required />
                  </div>
                </div>
                <div class="form-row full">
                  <div class="form-group">
                    <label class="form-label" for="instructorBio"
                      >Gi·ªõi thi·ªáu b·∫£n th√¢n *</label
                    >
                    <textarea
                      class="form-textarea"
                      id="instructorBio"
                      rows="4"
                      required
                      placeholder="Chia s·∫ª v·ªÅ kinh nghi·ªám, chuy√™n m√¥n v√† passion c·ªßa b·∫°n..."></textarea>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="instructorGithub"
                      >GitHub (t√πy ch·ªçn)</label
                    >
                    <input
                      type="url"
                      class="form-input"
                      id="instructorGithub"
                      placeholder="https://github.com/username" />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="instructorLinkedin"
                      >LinkedIn (t√πy ch·ªçn)</label
                    >
                    <input
                      type="url"
                      class="form-input"
                      id="instructorLinkedin"
                      placeholder="https://linkedin.com/in/username" />
                  </div>
                </div>
                <div style="text-align: center; margin-top: 30px">
                  <button
                    type="submit"
                    class="btn btn-primary"
                    style="margin-right: 15px">
                    üíæ C·∫≠p nh·∫≠t h·ªì s∆°
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    onclick="loadInstructorProfileData()">
                    üîÑ L√†m m·ªõi
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div id="instructorCourses" class="tab-content">
            <div
              style="
                display: flex;
                justify-content: between;
                align-items: center;
                margin-bottom: 30px;
              ">
              <h3 style="color: var(--accent-gold)">üìö Kh√≥a h·ªçc c·ªßa t√¥i</h3>
              <button class="btn btn-primary" onclick="showAddCourseForm()">
                ‚ûï Th√™m kh√≥a h·ªçc m·ªõi
              </button>
            </div>
            <div id="myInstructorCourses">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i kh√≥a h·ªçc...</p>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Profile Section -->
      <section
        id="profileSection"
        class="section user-section"
        style="display: none">
        <div class="container">
          <h2 class="section-title">üë§ H·ªì s∆° c√° nh√¢n</h2>
          <div class="user-tabs">
            <button class="tab-btn active" onclick="switchProfileTab('info')">
              Th√¥ng tin
            </button>
            <button class="tab-btn" onclick="switchProfileTab('watchlist')">
              Y√™u th√≠ch
            </button>
            <button class="tab-btn" onclick="switchProfileTab('enrolled')">
              Kh√≥a h·ªçc ƒë√£ mua
            </button>
            <button
              class="tab-btn"
              id="adminTab"
              onclick="switchProfileTab('admin')"
              style="display: none">
              Qu·∫£n tr·ªã
            </button>
          </div>
          <div id="profileInfo" class="tab-content active">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              C·∫≠p nh·∫≠t th√¥ng tin
            </h3>
            <form onsubmit="updateProfile(event)">
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="profileName">H·ªç t√™n</label>
                  <input type="text" class="form-input" id="profileName" />
                </div>
                <div class="form-group">
                  <label class="form-label" for="profileEmail">Email</label>
                  <input type="email" class="form-input" id="profileEmail" />
                </div>
              </div>
              <div class="form-row" id="instructorFields" style="display: none">
                <div class="form-group">
                  <label class="form-label" for="profileExperience"
                    >Kinh nghi·ªám (nƒÉm)</label
                  >
                  <input
                    type="number"
                    class="form-input"
                    id="profileExperience"
                    min="0" />
                </div>
                <div class="form-group">
                  <label class="form-label" for="profileAvatar"
                    >Avatar (emoji ho·∫∑c k√Ω t·ª±)</label
                  >
                  <input
                    type="text"
                    class="form-input"
                    id="profileAvatar"
                    maxlength="2" />
                </div>
              </div>
              <div class="form-row full" id="bioField" style="display: none">
                <div class="form-group">
                  <label class="form-label" for="profileBio"
                    >Gi·ªõi thi·ªáu b·∫£n th√¢n</label
                  >
                  <textarea
                    class="form-textarea"
                    id="profileBio"
                    rows="4"
                    placeholder="Chia s·∫ª v·ªÅ kinh nghi·ªám v√† chuy√™n m√¥n c·ªßa b·∫°n..."></textarea>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label" for="currentPassword"
                    >M·∫≠t kh·∫©u hi·ªán t·∫°i</label
                  >
                  <input
                    type="password"
                    class="form-input"
                    id="currentPassword" />
                </div>
                <div class="form-group">
                  <label class="form-label" for="newPassword"
                    >M·∫≠t kh·∫©u m·ªõi (ƒë·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi)</label
                  >
                  <input type="password" class="form-input" id="newPassword" />
                </div>
              </div>
              <button type="submit" class="btn btn-primary" style="width: 100%">
                C·∫≠p nh·∫≠t
              </button>
            </form>
          </div>
          <div id="profileWatchlist" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              Danh s√°ch y√™u th√≠ch
            </h3>
            <div class="course-grid" id="watchlistCourses">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i danh s√°ch y√™u th√≠ch...</p>
              </div>
            </div>
          </div>
          <div id="profileEnrolled" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              Kh√≥a h·ªçc ƒë√£ mua
            </h3>
            <div class="course-grid" id="enrolledCourses">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i kh√≥a h·ªçc ƒë√£ mua...</p>
              </div>
            </div>
          </div>
          <div id="profileInstructor" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              Qu·∫£n l√Ω kh√≥a h·ªçc gi·∫£ng d·∫°y
            </h3>
            <div style="text-align: center; margin-bottom: 30px">
              <button class="btn btn-primary" onclick="showAddCourseForm()">
                ‚ûï Th√™m kh√≥a h·ªçc m·ªõi
              </button>
            </div>
            <div id="instructorCourses">
              <div class="loading">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i kh√≥a h·ªçc gi·∫£ng d·∫°y...</p>
              </div>
            </div>
          </div>
          <div id="profileAdmin" class="tab-content">
            <h3
              style="
                text-align: center;
                color: var(--accent-gold);
                margin-bottom: 30px;
              ">
              Qu·∫£n tr·ªã h·ªá th·ªëng
            </h3>
            <div class="admin-panel">
              <div class="admin-tabs">
                <button
                  class="admin-tab active"
                  onclick="switchAdminTab('courses')">
                  Kh√≥a h·ªçc
                </button>
                <button class="admin-tab" onclick="switchAdminTab('users')">
                  Ng∆∞·ªùi d√πng
                </button>
                <button
                  class="admin-tab"
                  onclick="switchAdminTab('categories')">
                  Lƒ©nh v·ª±c
                </button>
              </div>
              <div id="adminCourses" class="admin-content">
                <div class="loading">
                  <div class="spinner"></div>
                  <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
                </div>
              </div>
              <div id="adminUsers" class="admin-content" style="display: none">
                <div class="loading">
                  <div class="spinner"></div>
                  <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
                </div>
              </div>
              <div
                id="adminCategories"
                class="admin-content"
                style="display: none">
                <div class="loading">
                  <div class="spinner"></div>
                  <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- Course Form Modal -->
    <div id="courseModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="courseModalTitle">Th√™m kh√≥a h·ªçc m·ªõi</h2>
          <button class="close-btn" onclick="closeCourseModal()">√ó</button>
        </div>
        <form id="courseForm" onsubmit="saveCourse(event)">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="courseTitle">T√™n kh√≥a h·ªçc *</label>
              <input type="text" class="form-input" id="courseTitle" required />
            </div>
            <div class="form-group">
              <label class="form-label" for="courseImage">Icon kh√≥a h·ªçc</label>
              <input
                type="text"
                class="form-input"
                id="courseImage"
                placeholder="üêç"
                maxlength="2" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="courseCategory">Lƒ©nh v·ª±c *</label>
              <select class="form-select" id="courseCategory" required>
                <option value="">Ch·ªçn lƒ©nh v·ª±c</option>
                <option value="IT">C√¥ng ngh·ªá th√¥ng tin</option>
                <option value="Design">Thi·∫øt k·∫ø</option>
                <option value="Business">Kinh doanh</option>
                <option value="Marketing">Marketing</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="courseSubcategory"
                >Chuy√™n ng√†nh *</label
              >
              <select class="form-select" id="courseSubcategory" required>
                <option value="">Ch·ªçn chuy√™n ng√†nh</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="coursePrice"
                >Gi√° g·ªëc (VNƒê) *</label
              >
              <input
                type="number"
                class="form-input"
                id="coursePrice"
                min="0"
                required />
            </div>
            <div class="form-group">
              <label class="form-label" for="courseDiscountPrice"
                >Gi√° khuy·∫øn m√£i (VNƒê)</label
              >
              <input
                type="number"
                class="form-input"
                id="courseDiscountPrice"
                min="0" />
            </div>
          </div>
          <div class="form-row full">
            <div class="form-group">
              <label class="form-label">M√¥ t·∫£ kh√≥a h·ªçc *</label>
              <div class="editor-container">
                <div id="courseDescriptionEditor"></div>
              </div>
            </div>
          </div>
          <div class="form-row full">
            <div class="form-group">
              <label class="form-label" for="courseRequirements"
                >Y√™u c·∫ßu ƒë·∫ßu v√†o</label
              >
              <textarea
                class="form-textarea"
                id="courseRequirements"
                rows="3"
                placeholder="V√≠ d·ª•: Ki·∫øn th·ª©c c∆° b·∫£n v·ªÅ HTML, CSS..."></textarea>
            </div>
          </div>
          <div class="form-row full">
            <div class="form-group">
              <label class="form-label" for="courseWhatYouLearn"
                >B·∫°n s·∫Ω h·ªçc ƒë∆∞·ª£c g√¨</label
              >
              <textarea
                class="form-textarea"
                id="courseWhatYouLearn"
                rows="4"
                placeholder="M·ªói d√≤ng m·ªôt m·ª•c h·ªçc ƒë∆∞·ª£c..."></textarea>
            </div>
          </div>
          <div class="form-row full">
            <div class="form-group">
              <label class="form-label" for="courseTargetAudience"
                >ƒê·ªëi t∆∞·ª£ng h·ªçc vi√™n</label
              >
              <textarea
                class="form-textarea"
                id="courseTargetAudience"
                rows="3"
                placeholder="Kh√≥a h·ªçc n√†y ph√π h·ª£p v·ªõi..."></textarea>
            </div>
          </div>
          <div class="form-row full">
            <div class="form-group">
              <label class="form-label">Ch∆∞∆°ng tr√¨nh h·ªçc</label>
              <div id="chaptersContainer">
                <div class="chapter-item">
                  <input
                    type="text"
                    class="form-input"
                    placeholder="T√™n ch∆∞∆°ng 1"
                    style="margin-bottom: 10px" />
                  <button
                    type="button"
                    class="btn btn-danger btn-sm"
                    onclick="removeChapter(this)">
                    X√≥a
                  </button>
                </div>
              </div>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="addChapter()">
                ‚ûï Th√™m ch∆∞∆°ng
              </button>
            </div>
          </div>
          <div
            style="
              display: flex;
              gap: 15px;
              justify-content: flex-end;
              margin-top: 30px;
            ">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeCourseModal()">
              H·ªßy
            </button>
            <button type="submit" class="btn btn-primary">L∆∞u kh√≥a h·ªçc</button>
          </div>
        </form>
      </div>
    </div>
    <!-- Chapter Detail Modal -->
    <div id="chapterModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="chapterModalTitle">
            Chi ti·∫øt ch∆∞∆°ng h·ªçc
          </h2>
          <button class="close-btn" onclick="closeChapterModal()">√ó</button>
        </div>
        <div id="chapterContent">
          <!-- Chapter content will be loaded here -->
        </div>
      </div>
    </div>
    <script>
      // Global variables
      let currentUser = null;
      let currentSlideIndex = 0;
      let allCourses = [];
      let allUsers = [];
      let currentPage = 1;
      let currentEditingCourse = null;
      let descriptionEditor = null;
      const coursesPerPage = 9;

      // Default configuration
      const defaultConfig = {
        academy_name: "üêç Slytherin Academy",
        welcome_message: "Ch√†o m·ª´ng ƒë·∫øn v·ªõi Slytherin Academy",
        featured_title: "üåü Kh√≥a h·ªçc n·ªïi b·∫≠t tu·∫ßn n√†y",
      };

      // Subcategory mapping
      const subcategoryMap = {
        IT: [
          "L·∫≠p tr√¨nh Web",
          "L·∫≠p tr√¨nh thi·∫øt b·ªã di ƒë·ªông",
          "Data Science",
          "DevOps",
          "Cybersecurity",
        ],
        Design: [
          "UI/UX Design",
          "Graphic Design",
          "Web Design",
          "Motion Graphics",
        ],
        Business: ["Qu·∫£n l√Ω d·ª± √°n", "Kh·ªüi nghi·ªáp", "T√†i ch√≠nh", "Nh√¢n s·ª±"],
        Marketing: [
          "Digital Marketing",
          "Content Marketing",
          "SEO/SEM",
          "Social Media",
        ],
      };

      // Data handler for SDK
      const dataHandler = {
        onDataChanged(data) {
          allCourses = data.filter((item) => item.type === "course");
          allUsers = data.filter((item) => item.type === "user");
          updateUI();
        },
      };

      // Initialize SDK
      async function initializeApp() {
        if (window.dataSdk) {
          const result = await window.dataSdk.init(dataHandler);
          if (result.isOk) {
            await seedInitialData();
          } else {
            console.error("Failed to initialize data SDK");
          }
        }

        // Initialize Element SDK
        if (window.elementSdk) {
          window.elementSdk.init({
            defaultConfig,
            render,
            mapToCapabilities,
            mapToEditPanelValues,
          });
        }

        // Initialize Quill editor
        initializeEditor();

        // Initial render
        render(defaultConfig);
      }

      // Initialize WYSIWYG Editor
      function initializeEditor() {
        if (typeof Quill !== "undefined") {
          descriptionEditor = new Quill("#courseDescriptionEditor", {
            theme: "snow",
            modules: {
              toolbar: [
                [{ header: [1, 2, 3, false] }],
                ["bold", "italic", "underline", "strike"],
                [{ list: "ordered" }, { list: "bullet" }],
                ["blockquote", "code-block"],
                ["link", "image"],
                ["clean"],
              ],
            },
            placeholder: "Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ kh√≥a h·ªçc...",
          });
        }
      }

      // Render function for Element SDK
      async function render(config) {
        const academyName = config.academy_name || defaultConfig.academy_name;
        const welcomeMessage =
          config.welcome_message || defaultConfig.welcome_message;
        const featuredTitle =
          config.featured_title || defaultConfig.featured_title;

        document.getElementById("academyName").textContent = academyName;
        document.getElementById("welcomeMessage").textContent = welcomeMessage;
        document.getElementById("featuredTitle").textContent = featuredTitle;
      }

      // Capabilities mapping
      function mapToCapabilities(config) {
        return {
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined,
        };
      }

      // Edit panel values mapping
      function mapToEditPanelValues(config) {
        return new Map([
          ["academy_name", config.academy_name || defaultConfig.academy_name],
          [
            "welcome_message",
            config.welcome_message || defaultConfig.welcome_message,
          ],
          [
            "featured_title",
            config.featured_title || defaultConfig.featured_title,
          ],
        ]);
      }

      // Seed initial data
      async function seedInitialData() {
        // Check if data already exists
        if (allCourses.length > 0) return;

        const sampleCourses = [
          {
            id: "python-advanced",
            type: "course",
            title: "Advanced Python Programming",
            description:
              "N√¢ng cao k·ªπ nƒÉng l·∫≠p tr√¨nh Python v·ªõi c√°c k·ªπ thu·∫≠t advanced v√† best practices t·ª´ c√°c chuy√™n gia h√†ng ƒë·∫ßu trong ng√†nh.",
            category: "IT",
            subcategory: "L·∫≠p tr√¨nh Web",
            instructor: "Nguy·ªÖn VƒÉn Minh",
            instructor_id: "instructor_1",
            instructor_bio: "Senior Python Developer v·ªõi 8+ nƒÉm kinh nghi·ªám",
            instructor_experience: "8",
            instructor_avatar: "üêç",
            rating: 4.9,
            reviews: 1234,
            students: 5678,
            price: 1299000,
            discount_price: 999000,
            image: "üêç",
            featured: true,
            bestseller: true,
            new: false,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            status: "completed",
            chapters: JSON.stringify([
              "Gi·ªõi thi·ªáu Python Advanced",
              "Object-Oriented Programming",
              "Decorators v√† Generators",
              "Async Programming",
              "Testing v√† Debugging",
            ]),
            videos: JSON.stringify({
              "Gi·ªõi thi·ªáu Python Advanced": "completed",
              "Object-Oriented Programming": "completed",
              "Decorators v√† Generators": "completed",
              "Async Programming": "completed",
              "Testing v√† Debugging": "completed",
            }),
            requirements:
              "Ki·∫øn th·ª©c c∆° b·∫£n v·ªÅ Python\nHi·ªÉu v·ªÅ l·∫≠p tr√¨nh h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng",
            what_you_learn:
              "N·∫Øm v·ªØng c√°c k·ªπ thu·∫≠t Python n√¢ng cao\nX√¢y d·ª±ng ·ª©ng d·ª•ng web v·ªõi Django/Flask\nT·ªëi ∆∞u h√≥a hi·ªáu su·∫•t code\nVi·∫øt test cases chuy√™n nghi·ªáp",
            target_audience:
              "L·∫≠p tr√¨nh vi√™n Python c√≥ kinh nghi·ªám\nSinh vi√™n IT mu·ªën n√¢ng cao k·ªπ nƒÉng\nDeveloper mu·ªën chuy·ªÉn sang Python",
          },
          {
            id: "react-mastery",
            type: "course",
            title: "React.js Mastery",
            description:
              "Tr·ªü th√†nh chuy√™n gia React.js v·ªõi kh√≥a h·ªçc to√†n di·ªán t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao, bao g·ªìm hooks, context, v√† c√°c pattern hi·ªán ƒë·∫°i.",
            category: "IT",
            subcategory: "L·∫≠p tr√¨nh Web",
            instructor: "Tr·∫ßn Th·ªã Lan",
            instructor_id: "instructor_2",
            instructor_bio: "Frontend Architect t·∫°i c√¥ng ty c√¥ng ngh·ªá h√†ng ƒë·∫ßu",
            instructor_experience: "6",
            instructor_avatar: "‚ö°",
            rating: 4.8,
            reviews: 987,
            students: 3456,
            price: 1599000,
            discount_price: 1199000,
            image: "‚ö°",
            featured: true,
            bestseller: false,
            new: true,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            status: "incomplete",
            chapters: JSON.stringify([
              "React Fundamentals",
              "Components v√† Props",
              "State Management",
              "React Hooks",
              "Advanced Patterns",
            ]),
            videos: JSON.stringify({
              "React Fundamentals": "completed",
              "Components v√† Props": "completed",
              "State Management": "pending",
              "React Hooks": "pending",
              "Advanced Patterns": "pending",
            }),
            requirements:
              "Ki·∫øn th·ª©c HTML, CSS, JavaScript\nHi·ªÉu v·ªÅ ES6+\nKinh nghi·ªám v·ªõi npm/yarn",
            what_you_learn:
              "X√¢y d·ª±ng ·ª©ng d·ª•ng React t·ª´ ƒë·∫ßu\nQu·∫£n l√Ω state hi·ªáu qu·∫£\nS·ª≠ d·ª•ng hooks v√† context\nT·ªëi ∆∞u h√≥a performance",
            target_audience:
              "Frontend developers\nSinh vi√™n mu·ªën h·ªçc React\nDeveloper mu·ªën c·∫≠p nh·∫≠t k·ªπ nƒÉng",
          },
          {
            id: "uiux-complete",
            type: "course",
            title: "UI/UX Design Complete",
            description:
              "Kh√≥a h·ªçc thi·∫øt k·∫ø UI/UX ho√†n ch·ªânh v·ªõi c√°c d·ª± √°n th·ª±c t·∫ø v√† portfolio chuy√™n nghi·ªáp, t·ª´ research ƒë·∫øn prototype.",
            category: "Design",
            subcategory: "UI/UX Design",
            instructor: "L√™ VƒÉn ƒê·ª©c",
            instructor_id: "instructor_3",
            instructor_bio: "Lead UX Designer v·ªõi portfolio ƒëa d·∫°ng",
            instructor_experience: "7",
            instructor_avatar: "üé®",
            rating: 4.7,
            reviews: 756,
            students: 2345,
            price: 1799000,
            discount_price: 1399000,
            image: "üé®",
            featured: true,
            bestseller: false,
            new: false,
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            status: "completed",
            chapters: JSON.stringify([
              "Design Thinking",
              "User Research",
              "Wireframing",
              "Prototyping",
              "Visual Design",
            ]),
            videos: JSON.stringify({
              "Design Thinking": "completed",
              "User Research": "completed",
              Wireframing: "completed",
              Prototyping: "completed",
              "Visual Design": "completed",
            }),
            requirements:
              "Kh√¥ng c·∫ßn kinh nghi·ªám tr∆∞·ªõc\nM√°y t√≠nh c√≥ th·ªÉ ch·∫°y Figma\nTinh th·∫ßn h·ªçc h·ªèi",
            what_you_learn:
              "Quy tr√¨nh thi·∫øt k·∫ø UX ho√†n ch·ªânh\nS·ª≠ d·ª•ng Figma chuy√™n nghi·ªáp\nT·∫°o prototype t∆∞∆°ng t√°c\nX√¢y d·ª±ng design system",
            target_audience:
              "Ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu v·ªõi UX/UI\nGraphic designer mu·ªën chuy·ªÉn ng√†nh\nProduct manager mu·ªën hi·ªÉu design",
          },
        ];

        // Create sample instructor users
        const sampleUsers = [
          {
            id: "instructor_1",
            type: "user",
            user_name: "Nguy·ªÖn VƒÉn Minh",
            user_email: "minh.instructor@academy.com",
            password: "123456",
            user_type: "instructor",
            bio: "Senior Python Developer v·ªõi 8+ nƒÉm kinh nghi·ªám trong ph√°t tri·ªÉn web v√† ·ª©ng d·ª•ng enterprise. ƒê√£ l√†m vi·ªác t·∫°i c√°c c√¥ng ty c√¥ng ngh·ªá h√†ng ƒë·∫ßu v√† c√≥ passion trong vi·ªác chia s·∫ª ki·∫øn th·ª©c.",
            experience: "8",
            avatar: "üêç",
            social_links: JSON.stringify({
              github: "https://github.com/minhpython",
              linkedin: "https://linkedin.com/in/minhpython",
            }),
            watchlist: JSON.stringify([]),
            enrolled_courses: JSON.stringify([]),
            progress: JSON.stringify({}),
            created_at: new Date().toISOString(),
          },
          {
            id: "instructor_2",
            type: "user",
            user_name: "Tr·∫ßn Th·ªã Lan",
            user_email: "lan.instructor@academy.com",
            password: "123456",
            user_type: "instructor",
            bio: "Frontend Architect v·ªõi chuy√™n m√¥n s√¢u v·ªÅ React.js v√† c√°c c√¥ng ngh·ªá frontend hi·ªán ƒë·∫°i. ƒê√£ x√¢y d·ª±ng nhi·ªÅu ·ª©ng d·ª•ng web quy m√¥ l·ªõn v√† c√≥ kinh nghi·ªám mentoring team.",
            experience: "6",
            avatar: "‚ö°",
            social_links: JSON.stringify({
              github: "https://github.com/lanreact",
              linkedin: "https://linkedin.com/in/lanreact",
            }),
            watchlist: JSON.stringify([]),
            enrolled_courses: JSON.stringify([]),
            progress: JSON.stringify({}),
            created_at: new Date().toISOString(),
          },
          {
            id: "instructor_3",
            type: "user",
            user_name: "L√™ VƒÉn ƒê·ª©c",
            user_email: "duc.instructor@academy.com",
            password: "123456",
            user_type: "instructor",
            bio: "Lead UX Designer v·ªõi portfolio ƒëa d·∫°ng t·ª´ startup ƒë·∫øn enterprise. Chuy√™n gia trong vi·ªác nghi√™n c·ª©u ng∆∞·ªùi d√πng v√† thi·∫øt k·∫ø tr·∫£i nghi·ªám t·ªëi ∆∞u.",
            experience: "7",
            avatar: "üé®",
            social_links: JSON.stringify({
              behance: "https://behance.net/ducux",
              linkedin: "https://linkedin.com/in/ducux",
            }),
            watchlist: JSON.stringify([]),
            enrolled_courses: JSON.stringify([]),
            progress: JSON.stringify({}),
            created_at: new Date().toISOString(),
          },
        ];

        // Create data
        for (const course of sampleCourses) {
          const result = await window.dataSdk.create(course);
          if (!result.isOk) {
            console.error("Failed to create course:", course.title);
          }
        }

        for (const user of sampleUsers) {
          const result = await window.dataSdk.create(user);
          if (!result.isOk) {
            console.error("Failed to create user:", user.user_name);
          }
        }
      }

      // Update UI based on data
      function updateUI() {
        updateMostViewedCourses();
        updateNewestCourses();
        updateAllCourses();

        if (currentUser && currentUser.user_type === "instructor") {
          loadInstructorCourses();
        }
      }

      // Update most viewed courses
      function updateMostViewedCourses() {
        const container = document.getElementById("mostViewedCourses");
        const mostViewed = allCourses
          .sort((a, b) => b.students - a.students)
          .slice(0, 6);

        container.innerHTML = mostViewed
          .map((course) => createCourseCard(course))
          .join("");
      }

      // Update newest courses
      function updateNewestCourses() {
        const container = document.getElementById("newestCourses");
        const newest = allCourses
          .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
          .slice(0, 6);

        container.innerHTML = newest
          .map((course) => createCourseCard(course))
          .join("");
      }

      // Update all courses
      function updateAllCourses() {
        const container = document.getElementById("allCourses");
        const startIndex = (currentPage - 1) * coursesPerPage;
        const endIndex = startIndex + coursesPerPage;
        const paginatedCourses = allCourses.slice(startIndex, endIndex);

        container.innerHTML = paginatedCourses
          .map((course) => createCourseCard(course))
          .join("");
        updatePagination("coursePagination", allCourses.length);
      }

      // Create course card HTML
      function createCourseCard(course) {
        const badge = course.bestseller
          ? "Best Seller"
          : course.new
          ? "M·ªõi"
          : "";
        const badgeHtml = badge
          ? `<div class="course-badge">${badge}</div>`
          : "";

        // Status badge for instructor view
        let statusBadge = "";
        if (
          currentUser &&
          currentUser.user_type === "instructor" &&
          course.instructor_id === currentUser.id
        ) {
          const statusClass =
            course.status === "completed"
              ? "status-completed"
              : course.status === "incomplete"
              ? "status-incomplete"
              : "status-draft";
          const statusText =
            course.status === "completed"
              ? "Ho√†n th√†nh"
              : course.status === "incomplete"
              ? "Ch∆∞a ho√†n th√†nh"
              : "B·∫£n nh√°p";
          statusBadge = `<div class="status-badge ${statusClass}">${statusText}</div>`;
        }

        return `
                <div class="course-card" onclick="showCourseDetail('${
                  course.id
                }')">
                    <div class="course-image">
                        ${badgeHtml}
                        ${statusBadge}
                        ${course.image}
                    </div>
                    <div class="course-content">
                        <div class="course-title">${course.title}</div>
                        <div class="course-category">${course.category} ‚Ä¢ ${
          course.subcategory
        }</div>
                        <div class="course-instructor">üë®‚Äçüè´ ${
                          course.instructor
                        }</div>
                        <div class="course-rating">
                            <span class="stars">${"‚≠ê".repeat(
                              Math.floor(course.rating)
                            )}</span>
                            <span>${course.rating} (${
          course.reviews
        } ƒë√°nh gi√°)</span>
                        </div>
                        <div class="course-price">
                            <span class="price-current">${formatPrice(
                              course.discount_price || course.price
                            )}</span>
                            ${
                              course.discount_price
                                ? `<span class="price-original">${formatPrice(
                                    course.price
                                  )}</span>`
                                : ""
                            }
                        </div>
                        ${
                          currentUser &&
                          currentUser.user_type === "instructor" &&
                          course.instructor_id === currentUser.id
                            ? `<div style="margin-top: 15px;">
                                <button class="btn btn-secondary btn-sm" onclick="event.stopPropagation(); editCourse('${course.id}')" style="margin-right: 10px;">‚úèÔ∏è S·ª≠a</button>
                                <button class="btn btn-primary btn-sm" onclick="event.stopPropagation(); manageCourseContent('${course.id}')">üìö N·ªôi dung</button>
                            </div>`
                            : ""
                        }
                    </div>
                </div>
            `;
      }

      // Format price
      function formatPrice(price) {
        return new Intl.NumberFormat("vi-VN", {
          style: "currency",
          currency: "VND",
        }).format(price);
      }

      // Show section
      function showSection(sectionName) {
        // Hide all sections
        const sections = [
          "homeSection",
          "coursesSection",
          "searchSection",
          "courseDetailSection",
          "authSection",
          "profileSection",
          "courseManagementSection",
          "instructorManagementSection",
        ];
        sections.forEach((section) => {
          document.getElementById(section).style.display = "none";
        });

        // Show selected section
        document.getElementById(sectionName + "Section").style.display =
          "block";

        // Load section-specific data
        if (sectionName === "courses") {
          updateAllCourses();
        } else if (sectionName === "profile" && currentUser) {
          loadProfileData();
        } else if (sectionName === "courseManagement") {
          loadCourseManagement();
        } else if (sectionName === "instructorManagement") {
          loadInstructorManagement();
        }
      }

      // Course Management Functions
      function switchCourseTab(tabName) {
        document
          .querySelectorAll("#courseManagementSection .tab-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelectorAll("#courseManagementSection .tab-content")
          .forEach((content) => content.classList.remove("active"));

        event.target.classList.add("active");
        document
          .getElementById(
            "course" + tabName.charAt(0).toUpperCase() + tabName.slice(1)
          )
          .classList.add("active");

        if (tabName === "list") {
          loadAdminCoursesList();
        } else if (tabName === "add") {
          loadInstructorOptions();
        } else if (tabName === "categories") {
          updateCategoryStats();
        }
      }

      function loadCourseManagement() {
        loadAdminCoursesList();
        loadInstructorOptions();
        updateCategoryStats();
      }

      function loadAdminCoursesList() {
        const container = document.getElementById("adminCoursesList");

        if (allCourses.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üìö Ch∆∞a c√≥ kh√≥a h·ªçc n√†o</h3>
                        <p>H√£y th√™m kh√≥a h·ªçc ƒë·∫ßu ti√™n</p>
                    </div>
                `;
          return;
        }

        const courseCards = allCourses
          .map(
            (course) => `
                <div class="course-card" style="margin-bottom: 20px;">
                    <div class="course-image">
                        <div class="status-badge ${
                          course.status === "completed"
                            ? "status-completed"
                            : course.status === "incomplete"
                            ? "status-incomplete"
                            : "status-draft"
                        }">
                            ${
                              course.status === "completed"
                                ? "Ho√†n th√†nh"
                                : course.status === "incomplete"
                                ? "Ch∆∞a ho√†n th√†nh"
                                : "B·∫£n nh√°p"
                            }
                        </div>
                        ${course.image}
                    </div>
                    <div class="course-content">
                        <div class="course-title">${course.title}</div>
                        <div class="course-category">${course.category} ‚Ä¢ ${
              course.subcategory
            }</div>
                        <div class="course-instructor">üë®‚Äçüè´ ${
                          course.instructor
                        }</div>
                        <div class="course-rating">
                            <span class="stars">${"‚≠ê".repeat(
                              Math.floor(course.rating)
                            )}</span>
                            <span>${course.rating} (${
              course.reviews
            } ƒë√°nh gi√°)</span>
                        </div>
                        <div class="course-price">
                            <span class="price-current">${formatPrice(
                              course.discount_price || course.price
                            )}</span>
                            ${
                              course.discount_price
                                ? `<span class="price-original">${formatPrice(
                                    course.price
                                  )}</span>`
                                : ""
                            }
                        </div>
                        <div style="margin-top: 15px; display: flex; gap: 10px;">
                            <button class="btn btn-secondary btn-sm" onclick="editCourse('${
                              course.id
                            }')">‚úèÔ∏è S·ª≠a</button>
                            <button class="btn btn-primary btn-sm" onclick="showCourseDetail('${
                              course.id
                            }')">üëÅÔ∏è Xem</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteCourseConfirm('${
                              course.id
                            }')">üóëÔ∏è X√≥a</button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        container.innerHTML = `<div class="course-grid">${courseCards}</div>`;
      }

      function loadInstructorOptions() {
        const instructors = allUsers.filter(
          (user) => user.user_type === "instructor"
        );
        const select = document.getElementById("quickCourseInstructor");

        select.innerHTML = '<option value="">Ch·ªçn gi·∫£ng vi√™n</option>';
        instructors.forEach((instructor) => {
          const option = document.createElement("option");
          option.value = instructor.id;
          option.textContent = `${instructor.avatar || "üë®‚Äçüè´"} ${
            instructor.user_name
          }`;
          select.appendChild(option);
        });
      }

      function updateQuickSubcategories() {
        const category = document.getElementById("quickCourseCategory").value;
        const subcategorySelect = document.getElementById(
          "quickCourseSubcategory"
        );

        subcategorySelect.innerHTML =
          '<option value="">Ch·ªçn chuy√™n ng√†nh</option>';

        if (category && subcategoryMap[category]) {
          subcategoryMap[category].forEach((sub) => {
            const option = document.createElement("option");
            option.value = sub;
            option.textContent = sub;
            subcategorySelect.appendChild(option);
          });
        }
      }

      async function quickAddCourse(event) {
        event.preventDefault();

        // Check course limit
        if (allCourses.length >= 999) {
          showToast("ƒê√£ ƒë·∫°t gi·ªõi h·∫°n t·ªëi ƒëa 999 kh√≥a h·ªçc!", "error");
          return;
        }

        const title = document.getElementById("quickCourseTitle").value;
        const image = document.getElementById("quickCourseImage").value || "üìö";
        const category = document.getElementById("quickCourseCategory").value;
        const subcategory = document.getElementById(
          "quickCourseSubcategory"
        ).value;
        const price = parseInt(
          document.getElementById("quickCoursePrice").value
        );
        const instructorId = document.getElementById(
          "quickCourseInstructor"
        ).value;
        const description = document.getElementById(
          "quickCourseDescription"
        ).value;

        const instructor = allUsers.find((u) => u.id === instructorId);
        if (!instructor) {
          showToast("Vui l√≤ng ch·ªçn gi·∫£ng vi√™n!", "error");
          return;
        }

        const newCourse = {
          id: "course_" + Date.now(),
          type: "course",
          title,
          description,
          category,
          subcategory,
          instructor: instructor.user_name,
          instructor_id: instructorId,
          instructor_bio: instructor.bio || "",
          instructor_experience: instructor.experience || "1",
          instructor_avatar: instructor.avatar || "üë®‚Äçüè´",
          rating: 0,
          reviews: 0,
          students: 0,
          price,
          discount_price: null,
          image,
          featured: false,
          bestseller: false,
          new: true,
          status: "draft",
          chapters: JSON.stringify(["Ch∆∞∆°ng 1: Gi·ªõi thi·ªáu"]),
          videos: JSON.stringify({ "Ch∆∞∆°ng 1: Gi·ªõi thi·ªáu": "pending" }),
          requirements: "",
          what_you_learn: "",
          target_audience: "",
          created_at: new Date().toISOString(),
          updated_at: new Date().toISOString(),
        };

        const result = await window.dataSdk.create(newCourse);
        if (result.isOk) {
          showToast("T·∫°o kh√≥a h·ªçc th√†nh c√¥ng!", "success");
          document.getElementById("quickCourseForm").reset();
          loadAdminCoursesList();
          updateCategoryStats();
        } else {
          showToast("T·∫°o kh√≥a h·ªçc th·∫•t b·∫°i!", "error");
        }
      }

      function updateCategoryStats() {
        // This will be called when the categories tab is active
        // The template literals in the HTML will automatically update with current data
      }

      async function deleteCourseConfirm(courseId) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course) return;

        // Create inline confirmation
        const courseCard = event.target.closest(".course-card");
        const originalContent = courseCard.innerHTML;

        courseCard.innerHTML = `
                <div style="padding: 20px; text-align: center; background: var(--slytherin-dark); border-radius: 10px;">
                    <h4 style="color: var(--accent-gold); margin-bottom: 15px;">‚ö†Ô∏è X√°c nh·∫≠n x√≥a</h4>
                    <p style="color: var(--slytherin-silver); margin-bottom: 20px;">
                        B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√≥a h·ªçc "${
                          course.title
                        }"?<br>
                        H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.
                    </p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button class="btn btn-danger" onclick="confirmDeleteCourse('${courseId}')">üóëÔ∏è X√≥a</button>
                        <button class="btn btn-secondary" onclick="cancelDeleteCourse(this, \`${originalContent.replace(
                          /`/g,
                          "\\`"
                        )}\`)">‚ùå H·ªßy</button>
                    </div>
                </div>
            `;
      }

      async function confirmDeleteCourse(courseId) {
        const course = allCourses.find((c) => c.id === courseId);
        if (course) {
          const result = await window.dataSdk.delete(course);
          if (result.isOk) {
            showToast("X√≥a kh√≥a h·ªçc th√†nh c√¥ng!", "success");
            loadAdminCoursesList();
            updateCategoryStats();
          } else {
            showToast("X√≥a kh√≥a h·ªçc th·∫•t b·∫°i!", "error");
          }
        }
      }

      function cancelDeleteCourse(button, originalContent) {
        const courseCard = button.closest(".course-card");
        courseCard.innerHTML = originalContent;
      }

      // Instructor Management Functions
      function switchInstructorTab(tabName) {
        document
          .querySelectorAll("#instructorManagementSection .tab-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelectorAll("#instructorManagementSection .tab-content")
          .forEach((content) => content.classList.remove("active"));

        event.target.classList.add("active");
        document
          .getElementById(
            "instructor" + tabName.charAt(0).toUpperCase() + tabName.slice(1)
          )
          .classList.add("active");

        if (tabName === "list") {
          loadInstructorsList();
        } else if (tabName === "profile") {
          loadInstructorProfileData();
        } else if (tabName === "courses") {
          loadMyInstructorCourses();
        }
      }

      function loadInstructorManagement() {
        loadInstructorsList();
        if (currentUser && currentUser.user_type === "instructor") {
          loadInstructorProfileData();
          loadMyInstructorCourses();
        }
      }

      function loadInstructorsList() {
        const instructors = allUsers.filter(
          (user) => user.user_type === "instructor"
        );
        const container = document.getElementById("instructorsList");

        if (instructors.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üë®‚Äçüè´ Ch∆∞a c√≥ gi·∫£ng vi√™n n√†o</h3>
                        <p>H√£y ƒëƒÉng k√Ω t√†i kho·∫£n gi·∫£ng vi√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
                    </div>
                `;
          return;
        }

        const instructorCards = instructors
          .map((instructor) => {
            const instructorCourses = allCourses.filter(
              (c) => c.instructor_id === instructor.id
            );
            const totalStudents = instructorCourses.reduce(
              (sum, c) => sum + c.students,
              0
            );
            const avgRating =
              instructorCourses.length > 0
                ? (
                    instructorCourses.reduce((sum, c) => sum + c.rating, 0) /
                    instructorCourses.length
                  ).toFixed(1)
                : 0;

            return `
                    <div class="course-card" style="margin-bottom: 20px;">
                        <div class="course-image" style="background: linear-gradient(45deg, var(--slytherin-light), var(--accent-gold));">
                            <div style="font-size: 4rem;">${
                              instructor.avatar || "üë®‚Äçüè´"
                            }</div>
                        </div>
                        <div class="course-content">
                            <div class="course-title">${
                              instructor.user_name
                            }</div>
                            <div class="course-category">üìß ${
                              instructor.user_email
                            }</div>
                            <div class="course-instructor">üéØ ${
                              instructor.experience || "1"
                            }+ nƒÉm kinh nghi·ªám</div>
                            <div class="course-rating">
                                <span class="stars">${"‚≠ê".repeat(
                                  Math.floor(avgRating)
                                )}</span>
                                <span>${avgRating} ‚Ä¢ ${
              instructorCourses.length
            } kh√≥a h·ªçc</span>
                            </div>
                            <div style="color: var(--slytherin-silver); margin: 10px 0; font-size: 0.9rem;">
                                üë• ${totalStudents} h·ªçc vi√™n
                            </div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem; line-height: 1.4;">
                                ${(
                                  instructor.bio ||
                                  "Ch∆∞a c√≥ th√¥ng tin gi·ªõi thi·ªáu"
                                ).substring(0, 100)}${
              instructor.bio && instructor.bio.length > 100 ? "..." : ""
            }
                            </div>
                            <div style="margin-top: 15px;">
                                <button class="btn btn-primary btn-sm" onclick="viewInstructorDetail('${
                                  instructor.id
                                }')">üëÅÔ∏è Xem chi ti·∫øt</button>
                            </div>
                        </div>
                    </div>
                `;
          })
          .join("");

        container.innerHTML = `<div class="course-grid">${instructorCards}</div>`;
      }

      function viewInstructorDetail(instructorId) {
        const instructor = allUsers.find((u) => u.id === instructorId);
        if (!instructor) return;

        const instructorCourses = allCourses.filter(
          (c) => c.instructor_id === instructorId
        );
        const totalStudents = instructorCourses.reduce(
          (sum, c) => sum + c.students,
          0
        );
        const avgRating =
          instructorCourses.length > 0
            ? (
                instructorCourses.reduce((sum, c) => sum + c.rating, 0) /
                instructorCourses.length
              ).toFixed(1)
            : 0;

        const detailHtml = `
                <div style="text-align: center; margin-bottom: 40px;">
                    <div style="width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(45deg, var(--slytherin-light), var(--accent-gold)); margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 4rem;">
                        ${instructor.avatar || "üë®‚Äçüè´"}
                    </div>
                    <h2 style="color: var(--accent-gold); margin-bottom: 10px;">${
                      instructor.user_name
                    }</h2>
                    <div style="color: var(--slytherin-silver); margin-bottom: 20px;">
                        üìß ${instructor.user_email} ‚Ä¢ üéØ ${
          instructor.experience || "1"
        }+ nƒÉm kinh nghi·ªám
                    </div>
                    <div style="display: flex; justify-content: center; gap: 30px; margin-bottom: 20px;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--accent-gold);">${
                              instructorCourses.length
                            }</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">Kh√≥a h·ªçc</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--accent-gold);">${totalStudents}</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">H·ªçc vi√™n</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: var(--accent-gold);">${avgRating}</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">ƒê√°nh gi√°</div>
                        </div>
                    </div>
                </div>

                <div style="background: var(--slytherin-dark); padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                    <h3 style="color: var(--accent-gold); margin-bottom: 20px;">üìù Gi·ªõi thi·ªáu</h3>
                    <p style="color: var(--slytherin-silver); line-height: 1.8;">
                        ${
                          instructor.bio ||
                          "Gi·∫£ng vi√™n ch∆∞a c·∫≠p nh·∫≠t th√¥ng tin gi·ªõi thi·ªáu."
                        }
                    </p>
                </div>

                ${
                  instructorCourses.length > 0
                    ? `
                    <div style="background: var(--slytherin-dark); padding: 30px; border-radius: 15px;">
                        <h3 style="color: var(--accent-gold); margin-bottom: 20px;">üìö Kh√≥a h·ªçc gi·∫£ng d·∫°y</h3>
                        <div class="course-grid">
                            ${instructorCourses
                              .map((course) => createCourseCard(course))
                              .join("")}
                        </div>
                    </div>
                `
                    : `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 40px;">
                        <h3>üìö Ch∆∞a c√≥ kh√≥a h·ªçc n√†o</h3>
                        <p>Gi·∫£ng vi√™n ch∆∞a t·∫°o kh√≥a h·ªçc n√†o</p>
                    </div>
                `
                }
            `;

        document.getElementById("chapterContent").innerHTML = detailHtml;
        document.getElementById(
          "chapterModalTitle"
        ).textContent = `H·ªì s∆°: ${instructor.user_name}`;
        document.getElementById("chapterModal").classList.add("show");
      }

      function loadInstructorProfileData() {
        if (!currentUser || currentUser.user_type !== "instructor") return;

        document.getElementById("instructorName").value =
          currentUser.user_name || "";
        document.getElementById("instructorEmail").value =
          currentUser.user_email || "";
        document.getElementById("instructorExperience").value =
          currentUser.experience || "";
        document.getElementById("instructorAvatar").value =
          currentUser.avatar || "";
        document.getElementById("instructorBio").value = currentUser.bio || "";

        const socialLinks = JSON.parse(currentUser.social_links || "{}");
        document.getElementById("instructorGithub").value =
          socialLinks.github || "";
        document.getElementById("instructorLinkedin").value =
          socialLinks.linkedin || "";
      }

      async function updateInstructorProfile(event) {
        event.preventDefault();

        if (!currentUser || currentUser.user_type !== "instructor") {
          showToast("Ch·ªâ gi·∫£ng vi√™n m·ªõi c√≥ th·ªÉ c·∫≠p nh·∫≠t h·ªì s∆°!", "error");
          return;
        }

        const socialLinks = {
          github: document.getElementById("instructorGithub").value,
          linkedin: document.getElementById("instructorLinkedin").value,
        };

        const updatedUser = {
          ...currentUser,
          user_name: document.getElementById("instructorName").value,
          user_email: document.getElementById("instructorEmail").value,
          experience: document.getElementById("instructorExperience").value,
          avatar: document.getElementById("instructorAvatar").value,
          bio: document.getElementById("instructorBio").value,
          social_links: JSON.stringify(socialLinks),
        };

        const result = await window.dataSdk.update(updatedUser);
        if (result.isOk) {
          currentUser = updatedUser;
          updateAuthUI();
          showToast("C·∫≠p nh·∫≠t h·ªì s∆° th√†nh c√¥ng!", "success");
          loadInstructorsList(); // Refresh instructor list
        } else {
          showToast("C·∫≠p nh·∫≠t h·ªì s∆° th·∫•t b·∫°i!", "error");
        }
      }

      function loadMyInstructorCourses() {
        if (!currentUser || currentUser.user_type !== "instructor") return;

        const instructorCourses = allCourses.filter(
          (course) => course.instructor_id === currentUser.id
        );
        const container = document.getElementById("myInstructorCourses");

        if (instructorCourses.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üìö Ch∆∞a c√≥ kh√≥a h·ªçc n√†o</h3>
                        <p>H√£y t·∫°o kh√≥a h·ªçc ƒë·∫ßu ti√™n c·ªßa b·∫°n</p>
                        <button class="btn btn-primary" onclick="showAddCourseForm()">‚ûï T·∫°o kh√≥a h·ªçc m·ªõi</button>
                    </div>
                `;
        } else {
          const stats = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">üìö</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: white;">${
                              instructorCourses.length
                            }</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">T·ªïng kh√≥a h·ªçc</div>
                        </div>
                        <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">‚úÖ</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: white;">${
                              instructorCourses.filter(
                                (c) => c.status === "completed"
                              ).length
                            }</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">ƒê√£ ho√†n th√†nh</div>
                        </div>
                        <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">üë•</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: white;">${instructorCourses.reduce(
                              (sum, c) => sum + c.students,
                              0
                            )}</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">T·ªïng h·ªçc vi√™n</div>
                        </div>
                        <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">‚≠ê</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: white;">${
                              instructorCourses.length > 0
                                ? (
                                    instructorCourses.reduce(
                                      (sum, c) => sum + c.rating,
                                      0
                                    ) / instructorCourses.length
                                  ).toFixed(1)
                                : 0
                            }</div>
                            <div style="color: var(--slytherin-silver); font-size: 0.9rem;">ƒê√°nh gi√° TB</div>
                        </div>
                    </div>
                `;

          container.innerHTML =
            stats +
            `<div class="course-grid">${instructorCourses
              .map((course) => createCourseCard(course))
              .join("")}</div>`;
        }
      }

      // Slideshow functionality
      function changeSlide(direction) {
        const slides = document.querySelectorAll(".slide");
        const dots = document.querySelectorAll(".dot");

        slides[currentSlideIndex].classList.remove("active");
        dots[currentSlideIndex].classList.remove("active");

        currentSlideIndex += direction;

        if (currentSlideIndex >= slides.length) {
          currentSlideIndex = 0;
        } else if (currentSlideIndex < 0) {
          currentSlideIndex = slides.length - 1;
        }

        slides[currentSlideIndex].classList.add("active");
        dots[currentSlideIndex].classList.add("active");
      }

      function currentSlide(index) {
        const slides = document.querySelectorAll(".slide");
        const dots = document.querySelectorAll(".dot");

        slides[currentSlideIndex].classList.remove("active");
        dots[currentSlideIndex].classList.remove("active");

        currentSlideIndex = index - 1;

        slides[currentSlideIndex].classList.add("active");
        dots[currentSlideIndex].classList.add("active");
      }

      // Auto slideshow
      setInterval(() => {
        changeSlide(1);
      }, 5000);

      // Search functionality
      function performSearch() {
        const query = document.getElementById("heroSearch").value;
        if (query.trim()) {
          document.getElementById("searchInput").value = query;
          showSection("search");
          performAdvancedSearch();
        }
      }

      function performAdvancedSearch() {
        const query = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const category = document.getElementById("searchCategory").value;
        const sort = document.getElementById("searchSort").value;

        let results = allCourses.filter((course) => {
          const matchesQuery =
            !query ||
            course.title.toLowerCase().includes(query) ||
            course.description.toLowerCase().includes(query) ||
            course.category.toLowerCase().includes(query) ||
            course.subcategory.toLowerCase().includes(query);

          const matchesCategory = !category || course.category === category;

          return matchesQuery && matchesCategory;
        });

        // Sort results
        switch (sort) {
          case "rating":
            results.sort((a, b) => b.rating - a.rating);
            break;
          case "price_asc":
            results.sort(
              (a, b) =>
                (a.discount_price || a.price) - (b.discount_price || b.price)
            );
            break;
          case "newest":
            results.sort(
              (a, b) => new Date(b.created_at) - new Date(a.created_at)
            );
            break;
          default:
            // Keep relevance order
            break;
        }

        const container = document.getElementById("searchResults");
        if (results.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üòî Kh√¥ng t√¨m th·∫•y kh√≥a h·ªçc n√†o</h3>
                        <p>Th·ª≠ s·ª≠ d·ª•ng t·ª´ kh√≥a kh√°c ho·∫∑c ch·ªçn lƒ©nh v·ª±c kh√°c</p>
                    </div>
                `;
        } else {
          container.innerHTML = results
            .map((course) => createCourseCard(course))
            .join("");
        }
      }

      // Show courses by category
      function showCoursesByCategory(category, subcategory) {
        showSection("courses");
        document.getElementById("categoryFilter").value = category;

        const filtered = allCourses.filter(
          (course) =>
            course.category === category &&
            (!subcategory || course.subcategory === subcategory)
        );

        const container = document.getElementById("allCourses");
        container.innerHTML = filtered
          .map((course) => createCourseCard(course))
          .join("");
      }

      // Show course detail
      function showCourseDetail(courseId) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course) return;

        const chapters = JSON.parse(course.chapters || "[]");
        const videos = JSON.parse(course.videos || "{}");
        const relatedCourses = allCourses
          .filter((c) => c.category === course.category && c.id !== courseId)
          .slice(0, 5);

        // Get instructor info
        const instructor =
          allUsers.find((u) => u.id === course.instructor_id) || {};
        const instructorBio =
          instructor.bio ||
          course.instructor_bio ||
          "Gi·∫£ng vi√™n c√≥ kinh nghi·ªám trong lƒ©nh v·ª±c n√†y.";
        const instructorExperience =
          instructor.experience || course.instructor_experience || "5+";
        const instructorAvatar =
          instructor.avatar || course.instructor_avatar || course.image;

        const detailHtml = `
                <div class="course-header" style="display: grid; grid-template-columns: 300px 1fr; gap: 30px; margin-bottom: 40px; padding: 30px; background: linear-gradient(135deg, var(--slytherin-dark), var(--slytherin-green)); border-radius: 15px;">
                    <div class="course-image" style="width: 100%; height: 200px; background: linear-gradient(45deg, var(--slytherin-light), var(--accent-gold)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 4rem;">
                        ${course.image}
                    </div>
                    <div class="course-info">
                        <h1 style="font-size: 2.5rem; color: var(--accent-gold); margin: 0 0 15px 0;">${
                          course.title
                        }</h1>
                        <p style="color: var(--slytherin-silver); font-size: 1.1rem; margin-bottom: 20px;">${
                          course.description
                        }</p>
                        <div style="display: flex; gap: 20px; margin: 15px 0; flex-wrap: wrap;">
                            <div style="background: rgba(212, 175, 55, 0.2); padding: 8px 15px; border-radius: 20px; color: var(--accent-gold);">
                                ‚≠ê ${course.rating} (${course.reviews} ƒë√°nh gi√°)
                            </div>
                            <div style="background: rgba(212, 175, 55, 0.2); padding: 8px 15px; border-radius: 20px; color: var(--accent-gold);">
                                üë• ${course.students} h·ªçc vi√™n
                            </div>
                            <div style="background: rgba(212, 175, 55, 0.2); padding: 8px 15px; border-radius: 20px; color: var(--accent-gold);">
                                üîÑ C·∫≠p nh·∫≠t: ${new Date(
                                  course.updated_at
                                ).toLocaleDateString("vi-VN")}
                            </div>
                        </div>
                        <div style="display: flex; gap: 15px; align-items: center; margin-top: 20px;">
                            <span style="color: var(--accent-gold); font-size: 1.5rem; font-weight: bold;">${formatPrice(
                              course.discount_price || course.price
                            )}</span>
                            ${
                              course.discount_price
                                ? `<span style="color: var(--slytherin-silver); text-decoration: line-through;">${formatPrice(
                                    course.price
                                  )}</span>`
                                : ""
                            }
                            <button class="btn btn-primary" onclick="enrollInCourse('${
                              course.id
                            }')" style="margin-left: auto;">üöÄ ƒêƒÉng k√Ω h·ªçc</button>
                            <button class="btn btn-secondary" onclick="toggleWatchlist('${
                              course.id
                            }')">‚ù§Ô∏è Y√™u th√≠ch</button>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 40px;">
                    <div>
                        <div style="background: var(--slytherin-dark); padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                            <h2 style="color: var(--accent-gold); margin-bottom: 20px;">üìã M√¥ t·∫£ chi ti·∫øt</h2>
                            <div style="color: var(--slytherin-silver); line-height: 1.8;">${
                              course.description
                            }</div>
                            
                            ${
                              course.what_you_learn
                                ? `
                                <h3 style="color: var(--accent-gold); margin: 20px 0 15px 0;">üéØ B·∫°n s·∫Ω h·ªçc ƒë∆∞·ª£c:</h3>
                                <ul style="color: var(--slytherin-silver); line-height: 1.6;">
                                    ${course.what_you_learn
                                      .split("\n")
                                      .map((item) => `<li>${item}</li>`)
                                      .join("")}
                                </ul>
                            `
                                : ""
                            }

                            ${
                              course.requirements
                                ? `
                                <h3 style="color: var(--accent-gold); margin: 20px 0 15px 0;">üìö Y√™u c·∫ßu:</h3>
                                <ul style="color: var(--slytherin-silver); line-height: 1.6;">
                                    ${course.requirements
                                      .split("\n")
                                      .map((item) => `<li>${item}</li>`)
                                      .join("")}
                                </ul>
                            `
                                : ""
                            }

                            ${
                              course.target_audience
                                ? `
                                <h3 style="color: var(--accent-gold); margin: 20px 0 15px 0;">üë• ƒê·ªëi t∆∞·ª£ng h·ªçc vi√™n:</h3>
                                <p style="color: var(--slytherin-silver); line-height: 1.6;">${course.target_audience}</p>
                            `
                                : ""
                            }
                        </div>

                        <div style="background: var(--slytherin-dark); padding: 30px; border-radius: 15px;">
                            <h2 style="color: var(--accent-gold); margin-bottom: 20px;">üìö ƒê·ªÅ c∆∞∆°ng kh√≥a h·ªçc</h2>
                            <div>
                                ${chapters
                                  .map((chapter, index) => {
                                    const videoStatus =
                                      videos[chapter] || "pending";
                                    const statusIcon =
                                      videoStatus === "completed"
                                        ? "‚úÖ"
                                        : videoStatus === "pending"
                                        ? "‚è≥"
                                        : "üìù";
                                    const statusText =
                                      videoStatus === "completed"
                                        ? "Ho√†n th√†nh"
                                        : videoStatus === "pending"
                                        ? "ƒêang c·∫≠p nh·∫≠t"
                                        : "B·∫£n nh√°p";

                                    return `
                                        <div style="background: var(--slytherin-green); margin: 10px 0; padding: 15px 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" 
                                             onmouseover="this.style.background='var(--slytherin-light)'" 
                                             onmouseout="this.style.background='var(--slytherin-green)'"
                                             onclick="showChapterDetail('${
                                               course.id
                                             }', '${chapter}')">
                                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                                <div>
                                                    <div style="font-weight: 600; color: white; margin-bottom: 5px;">Ch∆∞∆°ng ${
                                                      index + 1
                                                    }: ${chapter}</div>
                                                    <div style="color: var(--slytherin-silver); font-size: 0.9rem;">5 b√†i h·ªçc ‚Ä¢ 2 gi·ªù 30 ph√∫t</div>
                                                </div>
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <span style="color: var(--slytherin-silver); font-size: 0.8rem;">${statusText}</span>
                                                    <span style="font-size: 1.2rem;">${statusIcon}</span>
                                                    ${
                                                      index < 3
                                                        ? '<span style="color: var(--accent-gold); font-size: 0.8rem;">üëÅÔ∏è Xem tr∆∞·ªõc</span>'
                                                        : ""
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                  })
                                  .join("")}
                            </div>
                        </div>
                    </div>

                    <div>
                        <div style="background: var(--slytherin-dark); padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                            <h3 style="color: var(--accent-gold); margin-bottom: 20px;">üë®‚Äçüè´ Gi·∫£ng vi√™n</h3>
                            <div style="text-align: center;">
                                <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(45deg, var(--slytherin-light), var(--accent-gold)); margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; font-weight: bold;">
                                    ${instructorAvatar}
                                </div>
                                <div style="font-size: 1.2rem; font-weight: 600; color: white; margin-bottom: 10px;">${
                                  course.instructor
                                }</div>
                                <div style="color: var(--slytherin-silver); font-size: 0.9rem;">${instructorExperience}+ nƒÉm kinh nghi·ªám</div>
                                <p style="color: var(--slytherin-silver); font-size: 0.9rem; margin-top: 15px; text-align: left;">
                                    ${instructorBio}
                                </p>
                            </div>
                        </div>

                        ${
                          relatedCourses.length > 0
                            ? `
                            <div style="background: var(--slytherin-dark); padding: 25px; border-radius: 15px;">
                                <h3 style="color: var(--accent-gold); margin-bottom: 20px;">üìö Kh√≥a h·ªçc li√™n quan</h3>
                                ${relatedCourses
                                  .map(
                                    (related) => `
                                    <div style="display: flex; gap: 15px; margin-bottom: 15px; padding: 10px; background: var(--slytherin-green); border-radius: 8px; cursor: pointer;" onclick="showCourseDetail('${
                                      related.id
                                    }')">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(45deg, var(--slytherin-light), var(--accent-gold)); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                            ${related.image}
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="color: white; font-weight: 600; font-size: 0.9rem; margin-bottom: 5px;">${
                                              related.title
                                            }</div>
                                            <div style="color: var(--accent-gold); font-size: 0.8rem;">${formatPrice(
                                              related.discount_price ||
                                                related.price
                                            )}</div>
                                        </div>
                                    </div>
                                `
                                  )
                                  .join("")}
                            </div>
                        `
                            : ""
                        }
                    </div>
                </div>
            `;

        document.getElementById("courseDetailContent").innerHTML = detailHtml;
        showSection("courseDetail");
      }

      // Show chapter detail
      function showChapterDetail(courseId, chapterName) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course) return;

        const videos = JSON.parse(course.videos || "{}");
        const videoStatus = videos[chapterName] || "pending";

        const chapterContent = `
                <div style="margin-bottom: 30px;">
                    <h3 style="color: var(--accent-gold); margin-bottom: 15px;">${chapterName}</h3>
                    <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span style="color: white; font-weight: 600;">Tr·∫°ng th√°i:</span>
                            <span class="status-badge ${
                              videoStatus === "completed"
                                ? "status-completed"
                                : videoStatus === "pending"
                                ? "status-incomplete"
                                : "status-draft"
                            }">
                                ${
                                  videoStatus === "completed"
                                    ? "Ho√†n th√†nh"
                                    : videoStatus === "pending"
                                    ? "ƒêang c·∫≠p nh·∫≠t"
                                    : "B·∫£n nh√°p"
                                }
                            </span>
                        </div>
                        
                        ${
                          videoStatus === "completed"
                            ? `
                            <div style="background: var(--slytherin-dark); padding: 20px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 15px;">üé•</div>
                                <p style="color: var(--slytherin-silver); margin-bottom: 15px;">Video b√†i gi·∫£ng ƒë√£ s·∫µn s√†ng</p>
                                <button class="btn btn-primary">‚ñ∂Ô∏è Xem video</button>
                            </div>
                        `
                            : `
                            <div style="background: var(--slytherin-dark); padding: 20px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 15px;">‚è≥</div>
                                <p style="color: var(--slytherin-silver);">Video ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t. Vui l√≤ng quay l·∫°i sau.</p>
                            </div>
                        `
                        }
                    </div>

                    <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--accent-gold); margin-bottom: 15px;">üìã N·ªôi dung ch∆∞∆°ng</h4>
                        <ul style="color: var(--slytherin-silver); line-height: 1.8;">
                            <li>Gi·ªõi thi·ªáu v·ªÅ ch·ªß ƒë·ªÅ</li>
                            <li>L√Ω thuy·∫øt c∆° b·∫£n</li>
                            <li>Th·ª±c h√†nh v·ªõi v√≠ d·ª•</li>
                            <li>B√†i t·∫≠p v√† quiz</li>
                            <li>T·ªïng k·∫øt v√† review</li>
                        </ul>
                    </div>
                </div>
            `;

        document.getElementById("chapterContent").innerHTML = chapterContent;
        document.getElementById("chapterModalTitle").textContent = chapterName;
        document.getElementById("chapterModal").classList.add("show");
      }

      // Close chapter modal
      function closeChapterModal() {
        document.getElementById("chapterModal").classList.remove("show");
      }

      // Authentication functions
      function switchTab(tabName) {
        document
          .querySelectorAll(".tab-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelectorAll(".tab-content")
          .forEach((content) => content.classList.remove("active"));

        event.target.classList.add("active");
        document.getElementById(tabName + "Tab").classList.add("active");
      }

      async function handleLogin(event) {
        event.preventDefault();

        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;

        // Simple authentication (in real app, this would be server-side)
        const user = allUsers.find((u) => u.user_email === email);

        if (user && user.password === password) {
          currentUser = user;
          updateAuthUI();
          showToast("ƒêƒÉng nh·∫≠p th√†nh c√¥ng!", "success");
          showSection("home");
        } else {
          showToast("Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!", "error");
        }
      }

      async function handleRegister(event) {
        event.preventDefault();

        const name = document.getElementById("registerName").value;
        const email = document.getElementById("registerEmail").value;
        const password = document.getElementById("registerPassword").value;
        const userType = document.getElementById("registerUserType").value;

        // Check if email already exists
        const existingUser = allUsers.find((u) => u.user_email === email);
        if (existingUser) {
          showToast("Email ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng!", "error");
          return;
        }

        const newUser = {
          id: "user_" + Date.now(),
          type: "user",
          user_name: name,
          user_email: email,
          password: password,
          user_type: userType,
          bio: userType === "instructor" ? "Gi·∫£ng vi√™n m·ªõi tham gia" : "",
          experience: userType === "instructor" ? "1" : "",
          avatar: userType === "instructor" ? "üë®‚Äçüè´" : "üë§",
          social_links: JSON.stringify({}),
          watchlist: JSON.stringify([]),
          enrolled_courses: JSON.stringify([]),
          progress: JSON.stringify({}),
          created_at: new Date().toISOString(),
        };

        const result = await window.dataSdk.create(newUser);
        if (result.isOk) {
          currentUser = newUser;
          updateAuthUI();
          showToast("ƒêƒÉng k√Ω th√†nh c√¥ng!", "success");
          showSection("home");
        } else {
          showToast("ƒêƒÉng k√Ω th·∫•t b·∫°i!", "error");
        }
      }

      function updateAuthUI() {
        if (currentUser) {
          document.getElementById("guestButtons").style.display = "none";
          document.getElementById("userButtons").style.display = "flex";
          document.getElementById(
            "welcomeUser"
          ).textContent = `Xin ch√†o, ${currentUser.user_name}`;

          // Show instructor/admin tabs if applicable
          if (currentUser.user_type === "instructor") {
            document.getElementById("instructorTab").style.display = "block";
            document.getElementById("instructorFields").style.display = "grid";
            document.getElementById("bioField").style.display = "block";
          }
          if (currentUser.user_type === "admin") {
            document.getElementById("adminTab").style.display = "block";
          }
        } else {
          document.getElementById("guestButtons").style.display = "flex";
          document.getElementById("userButtons").style.display = "none";
          document.getElementById("instructorTab").style.display = "none";
          document.getElementById("adminTab").style.display = "none";
          document.getElementById("instructorFields").style.display = "none";
          document.getElementById("bioField").style.display = "none";
        }
      }

      function logout() {
        currentUser = null;
        updateAuthUI();
        showToast("ƒê√£ ƒëƒÉng xu·∫•t!", "success");
        showSection("home");
      }

      // Profile functions
      function switchProfileTab(tabName) {
        document
          .querySelectorAll(".tab-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelectorAll(".tab-content")
          .forEach((content) => content.classList.remove("active"));

        event.target.classList.add("active");
        document
          .getElementById(
            "profile" + tabName.charAt(0).toUpperCase() + tabName.slice(1)
          )
          .classList.add("active");

        if (tabName === "watchlist") {
          loadWatchlist();
        } else if (tabName === "enrolled") {
          loadEnrolledCourses();
        } else if (tabName === "instructor") {
          loadInstructorCourses();
        } else if (tabName === "admin") {
          loadAdminData();
        }
      }

      function loadProfileData() {
        if (currentUser) {
          document.getElementById("profileName").value = currentUser.user_name;
          document.getElementById("profileEmail").value =
            currentUser.user_email;

          if (currentUser.user_type === "instructor") {
            document.getElementById("profileBio").value = currentUser.bio || "";
            document.getElementById("profileExperience").value =
              currentUser.experience || "";
            document.getElementById("profileAvatar").value =
              currentUser.avatar || "";
          }
        }
      }

      async function updateProfile(event) {
        event.preventDefault();

        if (!currentUser) return;

        const currentPassword =
          document.getElementById("currentPassword").value;
        const newPassword = document.getElementById("newPassword").value;

        if (currentPassword !== currentUser.password) {
          showToast("M·∫≠t kh·∫©u hi·ªán t·∫°i kh√¥ng ƒë√∫ng!", "error");
          return;
        }

        const updatedUser = {
          ...currentUser,
          user_name: document.getElementById("profileName").value,
          user_email: document.getElementById("profileEmail").value,
          password: newPassword || currentUser.password,
        };

        // Update instructor-specific fields
        if (currentUser.user_type === "instructor") {
          updatedUser.bio = document.getElementById("profileBio").value;
          updatedUser.experience =
            document.getElementById("profileExperience").value;
          updatedUser.avatar = document.getElementById("profileAvatar").value;
        }

        const result = await window.dataSdk.update(updatedUser);
        if (result.isOk) {
          currentUser = updatedUser;
          updateAuthUI();
          showToast("C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!", "success");
        } else {
          showToast("C·∫≠p nh·∫≠t th·∫•t b·∫°i!", "error");
        }
      }

      // Course management functions
      function showAddCourseForm() {
        currentEditingCourse = null;
        document.getElementById("courseModalTitle").textContent =
          "Th√™m kh√≥a h·ªçc m·ªõi";
        document.getElementById("courseForm").reset();

        // Clear chapters
        document.getElementById("chaptersContainer").innerHTML = `
                <div class="chapter-item">
                    <input type="text" class="form-input" placeholder="T√™n ch∆∞∆°ng 1" style="margin-bottom: 10px;">
                    <button type="button" class="btn btn-danger btn-sm" onclick="removeChapter(this)">X√≥a</button>
                </div>
            `;

        // Clear editor
        if (descriptionEditor) {
          descriptionEditor.setContents([]);
        }

        document.getElementById("courseModal").classList.add("show");
      }

      function editCourse(courseId) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course || course.instructor_id !== currentUser.id) return;

        currentEditingCourse = course;
        document.getElementById("courseModalTitle").textContent =
          "Ch·ªânh s·ª≠a kh√≥a h·ªçc";

        // Fill form with course data
        document.getElementById("courseTitle").value = course.title;
        document.getElementById("courseImage").value = course.image;
        document.getElementById("courseCategory").value = course.category;
        updateSubcategories();
        document.getElementById("courseSubcategory").value = course.subcategory;
        document.getElementById("coursePrice").value = course.price;
        document.getElementById("courseDiscountPrice").value =
          course.discount_price || "";
        document.getElementById("courseRequirements").value =
          course.requirements || "";
        document.getElementById("courseWhatYouLearn").value =
          course.what_you_learn || "";
        document.getElementById("courseTargetAudience").value =
          course.target_audience || "";

        // Set editor content
        if (descriptionEditor) {
          descriptionEditor.root.innerHTML = course.description;
        }

        // Fill chapters
        const chapters = JSON.parse(course.chapters || "[]");
        const chaptersContainer = document.getElementById("chaptersContainer");
        chaptersContainer.innerHTML = chapters
          .map(
            (chapter, index) => `
                <div class="chapter-item">
                    <input type="text" class="form-input" value="${chapter}" placeholder="T√™n ch∆∞∆°ng ${
              index + 1
            }" style="margin-bottom: 10px;">
                    <button type="button" class="btn btn-danger btn-sm" onclick="removeChapter(this)">X√≥a</button>
                </div>
            `
          )
          .join("");

        document.getElementById("courseModal").classList.add("show");
      }

      function closeCourseModal() {
        document.getElementById("courseModal").classList.remove("show");
        currentEditingCourse = null;
      }

      // Update subcategories based on selected category
      document.addEventListener("change", function (event) {
        if (event.target.id === "courseCategory") {
          updateSubcategories();
        }
      });

      function updateSubcategories() {
        const category = document.getElementById("courseCategory").value;
        const subcategorySelect = document.getElementById("courseSubcategory");

        subcategorySelect.innerHTML =
          '<option value="">Ch·ªçn chuy√™n ng√†nh</option>';

        if (category && subcategoryMap[category]) {
          subcategoryMap[category].forEach((sub) => {
            const option = document.createElement("option");
            option.value = sub;
            option.textContent = sub;
            subcategorySelect.appendChild(option);
          });
        }
      }

      function addChapter() {
        const container = document.getElementById("chaptersContainer");
        const chapterCount = container.children.length + 1;

        const chapterDiv = document.createElement("div");
        chapterDiv.className = "chapter-item";
        chapterDiv.innerHTML = `
                <input type="text" class="form-input" placeholder="T√™n ch∆∞∆°ng ${chapterCount}" style="margin-bottom: 10px;">
                <button type="button" class="btn btn-danger btn-sm" onclick="removeChapter(this)">X√≥a</button>
            `;

        container.appendChild(chapterDiv);
      }

      function removeChapter(button) {
        const container = document.getElementById("chaptersContainer");
        if (container.children.length > 1) {
          button.parentElement.remove();
        } else {
          showToast("Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt ch∆∞∆°ng!", "error");
        }
      }

      async function saveCourse(event) {
        event.preventDefault();

        if (!currentUser || currentUser.user_type !== "instructor") {
          showToast("Ch·ªâ gi·∫£ng vi√™n m·ªõi c√≥ th·ªÉ t·∫°o kh√≥a h·ªçc!", "error");
          return;
        }

        // Check course limit
        if (!currentEditingCourse && allCourses.length >= 999) {
          showToast("ƒê√£ ƒë·∫°t gi·ªõi h·∫°n t·ªëi ƒëa 999 kh√≥a h·ªçc!", "error");
          return;
        }

        // Get form data
        const title = document.getElementById("courseTitle").value;
        const image = document.getElementById("courseImage").value || "üìö";
        const category = document.getElementById("courseCategory").value;
        const subcategory = document.getElementById("courseSubcategory").value;
        const price = parseInt(document.getElementById("coursePrice").value);
        const discountPrice = document.getElementById("courseDiscountPrice")
          .value
          ? parseInt(document.getElementById("courseDiscountPrice").value)
          : null;
        const requirements =
          document.getElementById("courseRequirements").value;
        const whatYouLearn =
          document.getElementById("courseWhatYouLearn").value;
        const targetAudience = document.getElementById(
          "courseTargetAudience"
        ).value;

        // Get description from editor
        const description = descriptionEditor
          ? descriptionEditor.root.innerHTML
          : "";

        // Get chapters
        const chapterInputs = document.querySelectorAll(
          "#chaptersContainer input"
        );
        const chapters = Array.from(chapterInputs)
          .map((input) => input.value.trim())
          .filter(Boolean);

        if (chapters.length === 0) {
          showToast("Ph·∫£i c√≥ √≠t nh·∫•t m·ªôt ch∆∞∆°ng!", "error");
          return;
        }

        // Create videos object with pending status for all chapters
        const videos = {};
        chapters.forEach((chapter) => {
          videos[chapter] = "pending";
        });

        const courseData = {
          title,
          description,
          category,
          subcategory,
          instructor: currentUser.user_name,
          instructor_id: currentUser.id,
          instructor_bio: currentUser.bio || "",
          instructor_experience: currentUser.experience || "1",
          instructor_avatar: currentUser.avatar || "üë®‚Äçüè´",
          rating: 0,
          reviews: 0,
          students: 0,
          price,
          discount_price: discountPrice,
          image,
          featured: false,
          bestseller: false,
          new: true,
          status: "incomplete", // Start as incomplete
          chapters: JSON.stringify(chapters),
          videos: JSON.stringify(videos),
          requirements,
          what_you_learn: whatYouLearn,
          target_audience: targetAudience,
          updated_at: new Date().toISOString(),
        };

        let result;
        if (currentEditingCourse) {
          // Update existing course
          const updatedCourse = {
            ...currentEditingCourse,
            ...courseData,
          };
          result = await window.dataSdk.update(updatedCourse);
        } else {
          // Create new course
          const newCourse = {
            id: "course_" + Date.now(),
            type: "course",
            created_at: new Date().toISOString(),
            ...courseData,
          };
          result = await window.dataSdk.create(newCourse);
        }

        if (result.isOk) {
          showToast(
            currentEditingCourse
              ? "C·∫≠p nh·∫≠t kh√≥a h·ªçc th√†nh c√¥ng!"
              : "T·∫°o kh√≥a h·ªçc th√†nh c√¥ng!",
            "success"
          );
          closeCourseModal();
          loadInstructorCourses();
        } else {
          showToast("L∆∞u kh√≥a h·ªçc th·∫•t b·∫°i!", "error");
        }
      }

      // Manage course content
      function manageCourseContent(courseId) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course || course.instructor_id !== currentUser.id) return;

        const chapters = JSON.parse(course.chapters || "[]");
        const videos = JSON.parse(course.videos || "{}");

        const contentHtml = `
                <div style="margin-bottom: 30px;">
                    <h3 style="color: var(--accent-gold); margin-bottom: 20px;">üìö Qu·∫£n l√Ω n·ªôi dung kh√≥a h·ªçc</h3>
                    <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span style="color: white; font-weight: 600;">Tr·∫°ng th√°i kh√≥a h·ªçc:</span>
                            <span class="status-badge ${
                              course.status === "completed"
                                ? "status-completed"
                                : "status-incomplete"
                            }">
                                ${
                                  course.status === "completed"
                                    ? "Ho√†n th√†nh"
                                    : "Ch∆∞a ho√†n th√†nh"
                                }
                            </span>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <div style="color: var(--slytherin-silver); margin-bottom: 5px;">Ti·∫øn ƒë·ªô ho√†n th√†nh:</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${calculateCourseProgress(
                                  videos
                                )}%"></div>
                            </div>
                            <div style="color: var(--accent-gold); font-size: 0.9rem; margin-top: 5px;">
                                ${calculateCourseProgress(videos)}% ho√†n th√†nh
                            </div>
                        </div>
                        
                        ${
                          course.status !== "completed"
                            ? `
                            <button class="btn btn-success" onclick="markCourseComplete('${courseId}')" 
                                    ${
                                      calculateCourseProgress(videos) < 100
                                        ? "disabled"
                                        : ""
                                    }>
                                ‚úÖ ƒê√°nh d·∫•u ho√†n th√†nh
                            </button>
                        `
                            : ""
                        }
                    </div>

                    <div class="chapter-list">
                        <h4 style="color: var(--accent-gold); margin-bottom: 20px;">üìã Danh s√°ch ch∆∞∆°ng</h4>
                        ${chapters
                          .map((chapter, index) => {
                            const videoStatus = videos[chapter] || "pending";
                            const statusClass =
                              videoStatus === "completed"
                                ? "status-completed"
                                : videoStatus === "pending"
                                ? "status-incomplete"
                                : "status-draft";
                            const statusText =
                              videoStatus === "completed"
                                ? "Ho√†n th√†nh"
                                : videoStatus === "pending"
                                ? "Ch∆∞a ho√†n th√†nh"
                                : "B·∫£n nh√°p";

                            return `
                                <div class="chapter-item">
                                    <div class="chapter-info">
                                        <div class="chapter-title">Ch∆∞∆°ng ${
                                          index + 1
                                        }: ${chapter}</div>
                                        <div class="chapter-status">
                                            <span class="status-badge ${statusClass}">${statusText}</span>
                                        </div>
                                    </div>
                                    <div class="chapter-actions">
                                        <button class="btn btn-secondary btn-sm" onclick="uploadVideo('${courseId}', '${chapter}')">
                                            üìπ ${
                                              videoStatus === "completed"
                                                ? "C·∫≠p nh·∫≠t video"
                                                : "Upload video"
                                            }
                                        </button>
                                        ${
                                          videoStatus !== "completed"
                                            ? `
                                            <button class="btn btn-success btn-sm" onclick="markChapterComplete('${courseId}', '${chapter}')">
                                                ‚úÖ Ho√†n th√†nh
                                            </button>
                                        `
                                            : ""
                                        }
                                    </div>
                                </div>
                            `;
                          })
                          .join("")}
                    </div>
                </div>
            `;

        document.getElementById("chapterContent").innerHTML = contentHtml;
        document.getElementById(
          "chapterModalTitle"
        ).textContent = `Qu·∫£n l√Ω n·ªôi dung: ${course.title}`;
        document.getElementById("chapterModal").classList.add("show");
      }

      // Calculate course progress
      function calculateCourseProgress(videos) {
        const totalChapters = Object.keys(videos).length;
        if (totalChapters === 0) return 0;

        const completedChapters = Object.values(videos).filter(
          (status) => status === "completed"
        ).length;
        return Math.round((completedChapters / totalChapters) * 100);
      }

      // Upload video (simulated)
      function uploadVideo(courseId, chapterName) {
        const uploadHtml = `
                <div style="margin-bottom: 30px;">
                    <h3 style="color: var(--accent-gold); margin-bottom: 20px;">üìπ Upload video cho: ${chapterName}</h3>
                    
                    <div class="video-upload" onclick="document.getElementById('videoFile').click()">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üìÅ</div>
                        <p style="color: var(--accent-gold); font-weight: 600; margin-bottom: 10px;">
                            K√©o th·∫£ file video v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn
                        </p>
                        <p style="color: var(--slytherin-silver); font-size: 0.9rem;">
                            H·ªó tr·ª£: MP4, AVI, MOV (t·ªëi ƒëa 500MB)
                        </p>
                        <input type="file" id="videoFile" accept="video/*" style="display: none;" onchange="handleVideoUpload('${courseId}', '${chapterName}', this)">
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="btn btn-secondary" onclick="closeChapterModal()">H·ªßy</button>
                    </div>
                </div>
            `;

        document.getElementById("chapterContent").innerHTML = uploadHtml;
      }

      // Handle video upload (simulated)
      function handleVideoUpload(courseId, chapterName, input) {
        if (input.files && input.files[0]) {
          const file = input.files[0];

          // Simulate upload process
          const uploadHtml = `
                    <div style="text-align: center; padding: 40px;">
                        <div class="spinner"></div>
                        <h3 style="color: var(--accent-gold); margin: 20px 0;">ƒêang upload video...</h3>
                        <p style="color: var(--slytherin-silver);">File: ${file.name}</p>
                        <div class="progress-bar" style="margin: 20px 0;">
                            <div class="progress-fill" id="uploadProgress" style="width: 0%"></div>
                        </div>
                        <div id="progressText" style="color: var(--accent-gold);">0%</div>
                    </div>
                `;

          document.getElementById("chapterContent").innerHTML = uploadHtml;

          // Simulate upload progress
          let progress = 0;
          const interval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress >= 100) {
              progress = 100;
              clearInterval(interval);

              // Mark chapter as completed after upload
              setTimeout(() => {
                markChapterComplete(courseId, chapterName);
              }, 1000);
            }

            document.getElementById("uploadProgress").style.width =
              progress + "%";
            document.getElementById("progressText").textContent =
              Math.round(progress) + "%";
          }, 200);
        }
      }

      // Mark chapter as complete
      async function markChapterComplete(courseId, chapterName) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course || course.instructor_id !== currentUser.id) return;

        const videos = JSON.parse(course.videos || "{}");
        videos[chapterName] = "completed";

        const updatedCourse = {
          ...course,
          videos: JSON.stringify(videos),
          updated_at: new Date().toISOString(),
        };

        const result = await window.dataSdk.update(updatedCourse);
        if (result.isOk) {
          showToast(`ƒê√£ ho√†n th√†nh ch∆∞∆°ng: ${chapterName}`, "success");
          manageCourseContent(courseId); // Refresh content
        } else {
          showToast("C·∫≠p nh·∫≠t th·∫•t b·∫°i!", "error");
        }
      }

      // Mark entire course as complete
      async function markCourseComplete(courseId) {
        const course = allCourses.find((c) => c.id === courseId);
        if (!course || course.instructor_id !== currentUser.id) return;

        const videos = JSON.parse(course.videos || "{}");
        const progress = calculateCourseProgress(videos);

        if (progress < 100) {
          showToast("Vui l√≤ng ho√†n th√†nh t·∫•t c·∫£ c√°c ch∆∞∆°ng tr∆∞·ªõc!", "error");
          return;
        }

        const updatedCourse = {
          ...course,
          status: "completed",
          updated_at: new Date().toISOString(),
        };

        const result = await window.dataSdk.update(updatedCourse);
        if (result.isOk) {
          showToast("Kh√≥a h·ªçc ƒë√£ ƒë∆∞·ª£c ƒë√°nh d·∫•u ho√†n th√†nh!", "success");
          closeChapterModal();
          loadInstructorCourses();
        } else {
          showToast("C·∫≠p nh·∫≠t th·∫•t b·∫°i!", "error");
        }
      }

      // Load instructor courses
      function loadInstructorCourses() {
        if (!currentUser || currentUser.user_type !== "instructor") return;

        const instructorCourses = allCourses.filter(
          (course) => course.instructor_id === currentUser.id
        );
        const container = document.getElementById("instructorCourses");

        if (instructorCourses.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üìö Ch∆∞a c√≥ kh√≥a h·ªçc n√†o</h3>
                        <p>H√£y t·∫°o kh√≥a h·ªçc ƒë·∫ßu ti√™n c·ªßa b·∫°n</p>
                        <button class="btn btn-primary" onclick="showAddCourseForm()">‚ûï T·∫°o kh√≥a h·ªçc m·ªõi</button>
                    </div>
                `;
        } else {
          container.innerHTML = `
                    <div style="margin-bottom: 30px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">üìö</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: white;">${
                                  instructorCourses.length
                                }</div>
                                <div style="color: var(--slytherin-silver); font-size: 0.9rem;">T·ªïng kh√≥a h·ªçc</div>
                            </div>
                            <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">‚úÖ</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: white;">${
                                  instructorCourses.filter(
                                    (c) => c.status === "completed"
                                  ).length
                                }</div>
                                <div style="color: var(--slytherin-silver); font-size: 0.9rem;">ƒê√£ ho√†n th√†nh</div>
                            </div>
                            <div style="background: var(--slytherin-green); padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 10px;">üë•</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: white;">${instructorCourses.reduce(
                                  (sum, c) => sum + c.students,
                                  0
                                )}</div>
                                <div style="color: var(--slytherin-silver); font-size: 0.9rem;">T·ªïng h·ªçc vi√™n</div>
                            </div>
                        </div>
                    </div>
                    <div class="course-grid">
                        ${instructorCourses
                          .map((course) => createCourseCard(course))
                          .join("")}
                    </div>
                `;
        }
      }

      // Course interaction functions
      async function enrollInCourse(courseId) {
        if (!currentUser) {
          showToast("Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒëƒÉng k√Ω kh√≥a h·ªçc!", "error");
          showSection("auth");
          return;
        }

        const enrolledCourses = JSON.parse(
          currentUser.enrolled_courses || "[]"
        );
        if (enrolledCourses.includes(courseId)) {
          showToast("B·∫°n ƒë√£ ƒëƒÉng k√Ω kh√≥a h·ªçc n√†y!", "error");
          return;
        }

        enrolledCourses.push(courseId);
        const updatedUser = {
          ...currentUser,
          enrolled_courses: JSON.stringify(enrolledCourses),
        };

        const result = await window.dataSdk.update(updatedUser);
        if (result.isOk) {
          currentUser = updatedUser;
          showToast("ƒêƒÉng k√Ω kh√≥a h·ªçc th√†nh c√¥ng!", "success");
        } else {
          showToast("ƒêƒÉng k√Ω th·∫•t b·∫°i!", "error");
        }
      }

      async function toggleWatchlist(courseId) {
        if (!currentUser) {
          showToast(
            "Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m v√†o danh s√°ch y√™u th√≠ch!",
            "error"
          );
          showSection("auth");
          return;
        }

        const watchlist = JSON.parse(currentUser.watchlist || "[]");
        const index = watchlist.indexOf(courseId);

        if (index > -1) {
          watchlist.splice(index, 1);
          showToast("ƒê√£ x√≥a kh·ªèi danh s√°ch y√™u th√≠ch!", "success");
        } else {
          watchlist.push(courseId);
          showToast("ƒê√£ th√™m v√†o danh s√°ch y√™u th√≠ch!", "success");
        }

        const updatedUser = {
          ...currentUser,
          watchlist: JSON.stringify(watchlist),
        };

        const result = await window.dataSdk.update(updatedUser);
        if (result.isOk) {
          currentUser = updatedUser;
        }
      }

      function loadWatchlist() {
        if (!currentUser) return;

        const watchlist = JSON.parse(currentUser.watchlist || "[]");
        const watchlistCourses = allCourses.filter((course) =>
          watchlist.includes(course.id)
        );

        const container = document.getElementById("watchlistCourses");
        if (watchlistCourses.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üíî Danh s√°ch y√™u th√≠ch tr·ªëng</h3>
                        <p>H√£y th√™m c√°c kh√≥a h·ªçc y√™u th√≠ch v√†o danh s√°ch</p>
                    </div>
                `;
        } else {
          container.innerHTML = watchlistCourses
            .map((course) => createCourseCard(course))
            .join("");
        }
      }

      function loadEnrolledCourses() {
        if (!currentUser) return;

        const enrolledCourses = JSON.parse(
          currentUser.enrolled_courses || "[]"
        );
        const courses = allCourses.filter((course) =>
          enrolledCourses.includes(course.id)
        );

        const container = document.getElementById("enrolledCourses");
        if (courses.length === 0) {
          container.innerHTML = `
                    <div style="text-align: center; color: var(--slytherin-silver); padding: 60px;">
                        <h3>üìö Ch∆∞a c√≥ kh√≥a h·ªçc n√†o</h3>
                        <p>H√£y ƒëƒÉng k√Ω c√°c kh√≥a h·ªçc ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc</p>
                    </div>
                `;
        } else {
          container.innerHTML = courses
            .map((course) => createCourseCard(course))
            .join("");
        }
      }

      // Utility functions
      function updatePagination(containerId, totalItems) {
        const container = document.getElementById(containerId);
        const totalPages = Math.ceil(totalItems / coursesPerPage);

        if (totalPages <= 1) {
          container.innerHTML = "";
          return;
        }

        let paginationHtml = "";

        if (currentPage > 1) {
          paginationHtml += `<button class="page-btn" onclick="changePage(${
            currentPage - 1
          })">‚Äπ Tr∆∞·ªõc</button>`;
        }

        for (let i = 1; i <= totalPages; i++) {
          if (i === currentPage) {
            paginationHtml += `<button class="page-btn active">${i}</button>`;
          } else {
            paginationHtml += `<button class="page-btn" onclick="changePage(${i})">${i}</button>`;
          }
        }

        if (currentPage < totalPages) {
          paginationHtml += `<button class="page-btn" onclick="changePage(${
            currentPage + 1
          })">Sau ‚Ä∫</button>`;
        }

        container.innerHTML = paginationHtml;
      }

      function changePage(page) {
        currentPage = page;
        updateAllCourses();
      }

      function showToast(message, type = "info") {
        const toast = document.createElement("div");
        toast.className = `toast ${type}`;
        toast.textContent = message;

        document.body.appendChild(toast);

        setTimeout(() => {
          toast.classList.add("show");
        }, 100);

        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300);
        }, 3000);
      }

      // Admin functions (simplified)
      function switchAdminTab(tabName) {
        document
          .querySelectorAll(".admin-tab")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelectorAll(".admin-content")
          .forEach((content) => (content.style.display = "none"));

        event.target.classList.add("active");
        document.getElementById(
          "admin" + tabName.charAt(0).toUpperCase() + tabName.slice(1)
        ).style.display = "block";
      }

      function loadAdminData() {
        // Load admin data (simplified)
        const adminCoursesContainer = document.getElementById("adminCourses");
        adminCoursesContainer.innerHTML = `
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>T√™n kh√≥a h·ªçc</th>
                            <th>Gi·∫£ng vi√™n</th>
                            <th>H·ªçc vi√™n</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${allCourses
                          .map(
                            (course) => `
                            <tr>
                                <td>${course.title}</td>
                                <td>${course.instructor}</td>
                                <td>${course.students}</td>
                                <td>
                                    <span class="status-badge ${
                                      course.status === "completed"
                                        ? "status-completed"
                                        : "status-incomplete"
                                    }">
                                        ${
                                          course.status === "completed"
                                            ? "Ho√†n th√†nh"
                                            : "Ch∆∞a ho√†n th√†nh"
                                        }
                                    </span>
                                </td>
                                <td>
                                    <button class="action-btn btn-view" onclick="showCourseDetail('${
                                      course.id
                                    }')">Xem</button>
                                    <button class="action-btn btn-delete" onclick="deleteCourse('${
                                      course.id
                                    }')">X√≥a</button>
                                </td>
                            </tr>
                        `
                          )
                          .join("")}
                    </tbody>
                </table>
            `;
      }

      async function deleteCourse(courseId) {
        if (!currentUser || currentUser.user_type !== "admin") {
          showToast("Kh√¥ng c√≥ quy·ªÅn th·ª±c hi·ªán thao t√°c n√†y!", "error");
          return;
        }

        const course = allCourses.find((c) => c.id === courseId);
        if (course) {
          const result = await window.dataSdk.delete(course);
          if (result.isOk) {
            showToast("X√≥a kh√≥a h·ªçc th√†nh c√¥ng!", "success");
            loadAdminData();
          } else {
            showToast("X√≥a kh√≥a h·ªçc th·∫•t b·∫°i!", "error");
          }
        }
      }

      // Initialize app when page loads
      document.addEventListener("DOMContentLoaded", initializeApp);
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'994ad4ec511b3fd0',t:'MTc2MTQ5MDkxNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
